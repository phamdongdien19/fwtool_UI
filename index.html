<!DOCTYPE html>
<!--
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    INTELLECTUAL PROPERTY NOTICE                       ‚ïë
‚ïë                                                                       ‚ïë
‚ïë  This software is the exclusive property of Ph·∫°m ƒê√¥ng ƒêi·ªÅn           ‚ïë
‚ïë  Copyright ¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn. All Rights Reserved.               ‚ïë
‚ïë                                                                       ‚ïë
‚ïë  Author: Ph·∫°m ƒê√¥ng ƒêi·ªÅn                                              ‚ïë
‚ïë  Email: phamdongdien19@gmail.com                                     ‚ïë
‚ïë                                                                       ‚ïë
‚ïë  Unauthorized copying, modification, distribution, or use of this   ‚ïë
‚ïë  software, in whole or in part, is strictly prohibited and may      ‚ïë
‚ïë  result in severe civil and criminal penalties.                      ‚ïë
‚ïë                                                                       ‚ïë
‚ïë  Original Creation: 2024                                              ‚ïë
‚ïë  Signature: PDD-FWTOOLS-2024-AUTHENTIC                               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
-->
<html lang="vi" data-theme="dark" data-author="Ph·∫°m ƒê√¥ng ƒêi·ªÅn" data-copyright="2025" data-signature="PDD-FWTOOLS-2024"
    data-v="MDk0MjYzNzUxOQ==">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Collection Pro - FW Tools</title>

    <!-- ‚ïê‚ïê‚ïê COPYRIGHT META TAGS ‚ïê‚ïê‚ïê -->
    <meta name="description"
        content="Web app tƒÉng hi·ªáu su·∫•t data collection cho kh·∫£o s√°t quantitative online - Personal productivity tool by Ph·∫°m ƒê√¥ng ƒêi·ªÅn">
    <meta name="author" content="Ph·∫°m ƒê√¥ng ƒêi·ªÅn">
    <meta name="copyright" content="Copyright ¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn. All Rights Reserved.">
    <meta name="creator" content="Ph·∫°m ƒê√¥ng ƒêi·ªÅn <phamdongdien19@gmail.com>">
    <meta name="owner" content="Ph·∫°m ƒê√¥ng ƒêi·ªÅn">
    <meta name="designer" content="Ph·∫°m ƒê√¥ng ƒêi·ªÅn">
    <meta name="developer" content="Ph·∫°m ƒê√¥ng ƒêi·ªÅn - phamdongdien19@gmail.com">
    <meta name="rights" content="All rights reserved. Unauthorized use prohibited.">
    <meta name="identifier" content="PDD-FWTOOLS-2024-AUTHENTIC">

    <!-- ‚ïê‚ïê‚ïê DUBLIN CORE METADATA FOR LEGAL PROOF ‚ïê‚ïê‚ïê -->
    <meta name="DC.title" content="FW Tools - Data Collection Pro">
    <meta name="DC.creator" content="Ph·∫°m ƒê√¥ng ƒêi·ªÅn">
    <meta name="DC.rights" content="Copyright ¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn">
    <meta name="DC.date" content="2024">
    <meta name="DC.identifier" content="PDD-FWTOOLS-2024">

    <style>
Ôªø/**
 * FW Tools - Data Collection Pro
 * CSS Design System & Styles
 * 
 * @copyright Copyright (c) 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn
 * @author Ph·∫°m ƒê√¥ng ƒêi·ªÅn <phamdongdien19@gmail.com>
 * @license MIT
 * 
 * ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
 * ‚ïë                    INTELLECTUAL PROPERTY NOTICE                       ‚ïë
 * ‚ïë‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïë
 * ‚ïë  This CSS code is protected by copyright law.                        ‚ïë
 * ‚ïë  Author: Ph·∫°m ƒê√¥ng ƒêi·ªÅn                                              ‚ïë
 * ‚ïë  Email: phamdongdien19@gmail.com                                     ‚ïë
 * ‚ïë  Created: 2024 | Last Updated: December 2025                         ‚ïë
 * ‚ïë                                                                       ‚ïë
 * ‚ïë  Unauthorized copying, modification, or distribution is prohibited.  ‚ïë
 * ‚ïë  Signature: PDD-FWTOOLS-2024-AUTHENTIC                               ‚ïë
 * ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
 */

/* ===== CSS Variables ===== */
:root {
    /* ‚ïê‚ïê COPYRIGHT WATERMARK ‚ïê‚ïê */
    --_author: "Ph·∫°m ƒê√¥ng ƒêi·ªÅn";
    --_email: "phamdongdien19@gmail.com";
    --_copyright: "¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn";
    --_signature: "PDD-FWTOOLS-2024-AUTHENTIC";

    /* Colors - Light Mode */
    --color-primary: #6366f1;
    --color-primary-dark: #4f46e5;
    --color-primary-light: #818cf8;
    --color-secondary: #64748b;
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-danger: #ef4444;
    --color-info: #3b82f6;

    /* SMS/Email specific */
    --color-sms: #06b6d4;
    --color-sms-dark: #0891b2;
    --color-email: #8b5cf6;
    --color-email-dark: #7c3aed;

    /* Backgrounds */
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-sidebar: linear-gradient(180deg, #1e1b4b 0%, #312e81 100%);
    --bg-card: #ffffff;
    --bg-hover: rgba(99, 102, 241, 0.08);
    --bg-glass: rgba(255, 255, 255, 0.8);

    /* Text */
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-tertiary: #94a3b8;
    --text-inverse: #ffffff;

    /* Borders */
    --border-color: #e2e8f0;
    --border-radius-sm: 6px;
    --border-radius: 10px;
    --border-radius-lg: 16px;
    --border-radius-xl: 24px;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);

    /* Spacing */
    --sidebar-width: 260px;
    --sidebar-collapsed-width: 72px;
    --header-height: 64px;

    /* Transitions */
    --transition-fast: 150ms ease;
    --transition: 250ms ease;
    --transition-slow: 350ms ease;
}

/* Import Type Tabs */
.import-type-tabs {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    margin-bottom: 20px;
}

.import-type-tabs .tab-btn {
    flex: 1;
    padding: 12px 20px;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-sm);
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.import-type-tabs .tab-btn:hover {
    color: var(--text-primary);
}

.import-type-tabs .tab-btn.active {
    background: var(--bg-primary);
    color: var(--color-primary);
    box-shadow: var(--shadow-sm);
}

.import-panel {
    animation: fadeIn var(--transition);
}

/* API Status Badge */
.api-status {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 12px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.api-status.configured {
    background: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
}

/* Progress Bar */
.api-progress {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 16px;
}

.progress-bar {
    flex: 1;
    height: 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.progress-text {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    min-width: 45px;
}

/* API Result */
.api-result {
    padding: 16px;
    border-radius: var(--border-radius);
    font-size: 14px;
}

.api-result.success {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.3);
    color: var(--color-success);
}

.api-result.error {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: var(--color-danger);
}

/* Dark Mode */
[data-theme="dark"] {
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-tertiary: #334155;
    --bg-sidebar: linear-gradient(180deg, #0f0d1f 0%, #1e1b4b 100%);
    --bg-card: #1e293b;
    --bg-hover: rgba(99, 102, 241, 0.15);
    --bg-glass: rgba(15, 23, 42, 0.9);

    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-tertiary: #64748b;

    --border-color: #334155;

    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
}

/* ===== Reset & Base ===== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg-secondary);
    color: var(--text-primary);
    line-height: 1.5;
    min-height: 100vh;
}

/* ===== App Container ===== */
.app-container {
    display: flex;
    min-height: 100vh;
}

/* ===== Sidebar ===== */
.sidebar {
    width: var(--sidebar-width);
    background: var(--bg-sidebar);
    color: var(--text-inverse);
    display: flex;
    flex-direction: column;
    position: relative;
    top: 0;
    left: 0;
    height: 100vh;
    z-index: 100;
    transition: width var(--transition);
    overflow: hidden;
}

.sidebar.collapsed {
    width: var(--sidebar-collapsed-width);
}

.sidebar-header {
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.logo-icon {
    font-size: 28px;
}

.logo-text {
    font-size: 20px;
    font-weight: 700;
    letter-spacing: -0.5px;
    white-space: nowrap;
}

.sidebar.collapsed .logo-text {
    display: none;
}

.sidebar-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    width: 32px;
    height: 32px;
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background var(--transition-fast);
}

.sidebar-toggle:hover {
    background: rgba(255, 255, 255, 0.2);
}

.sidebar-toggle span {
    width: 18px;
    height: 2px;
    background: white;
    position: relative;
}

.sidebar-toggle span::before,
.sidebar-toggle span::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: white;
    left: 0;
}

.sidebar-toggle span::before {
    top: -6px;
}

.sidebar-toggle span::after {
    top: 6px;
}

.sidebar-nav {
    flex: 1;
    padding: 16px 12px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 12px 16px;
    border-radius: var(--border-radius);
    color: rgba(255, 255, 255, 0.7);
    text-decoration: none;
    transition: all var(--transition-fast);
    white-space: nowrap;
}

.nav-item:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

.nav-item.active {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    font-weight: 500;
}

.nav-icon {
    font-size: 20px;
    width: 24px;
    text-align: center;
}

.sidebar.collapsed .nav-text {
    display: none;
}

.sidebar.collapsed .nav-item {
    justify-content: center;
    padding: 12px;
}

.sidebar-footer {
    padding: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.theme-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 18px;
    transition: background var(--transition-fast);
}

.theme-toggle:hover {
    background: rgba(255, 255, 255, 0.2);
}

.lang-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 13px;
    font-weight: 700;
    color: white;
    transition: background var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
}

.lang-toggle:hover {
    background: rgba(255, 255, 255, 0.2);
}

.version {
    font-size: 12px;
    opacity: 0.5;
}

.sidebar.collapsed .version {
    display: none;
}

/* ===== Project Manager ===== */
.project-manager {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-right: 16px;
}

.project-manager select {
    width: 180px;
}

.save-indicator {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 12px;
    font-weight: 500;
    transition: all var(--transition-fast);
}

.save-indicator.saved {
    background: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
}

.save-indicator.saving {
    background: rgba(99, 102, 241, 0.15);
    color: var(--color-primary);
}

.save-indicator.unsaved {
    background: rgba(245, 158, 11, 0.15);
    color: var(--color-warning);
}

.save-indicator.error {
    background: rgba(239, 68, 68, 0.15);
    color: var(--color-danger);
}


/* ===== Main Content ===== */
.main-content {
    flex: 1;
    margin-left: 0;
    transition: margin-left var(--transition);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

.sidebar.collapsed~.main-content {
    margin-left: var(--sidebar-collapsed-width);
}

.main-header {
    height: var(--header-height);
    background: var(--bg-primary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
    padding: 0 16px;
    position: sticky;
    top: 0;
    z-index: 50;
    overflow: visible;
    min-width: 0;
}

.main-header .header-right {
    margin-left: auto;
    flex-shrink: 0;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 16px;
}

.mobile-menu-btn {
    display: none;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--text-primary);
}

.page-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.header-right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.file-info {
    background: var(--bg-tertiary);
    padding: 8px 16px;
    border-radius: var(--border-radius);
    font-size: 14px;
    color: var(--text-secondary);
}

.file-name {
    font-weight: 500;
}

.content-wrapper {
    flex: 1;
    padding: 12px 24px 24px 24px;
    overflow-y: auto;
}

/* ===== Views ===== */
.view {
    display: none;
    animation: fadeIn var(--transition);
}

.view.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ===== Cards ===== */
.card {
    background: var(--bg-card);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow);
    overflow: hidden;
}

.card-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.card-header h3 {
    font-size: 16px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
}

.card-body {
    padding: 20px;
}

.card-footer {
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 12px;
}

/* ===== Stats Grid (Dashboard) ===== */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
}

.stat-card {
    background: var(--bg-card);
    border-radius: var(--border-radius-lg);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    box-shadow: var(--shadow);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.stat-icon {
    width: 56px;
    height: 56px;
    border-radius: var(--border-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
}

.stat-icon.total {
    background: linear-gradient(135deg, #6366f1 0%, #818cf8 100%);
}

.stat-icon.sms {
    background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%);
}

.stat-icon.email {
    background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
}

.stat-icon.pending {
    background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
}

.stat-info {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.stat-label {
    font-size: 13px;
    color: var(--text-secondary);
    font-weight: 500;
}

/* ===== Dashboard Content ===== */
.dashboard-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
}

.batch-history-card .card-body {
    min-height: 250px;
}

.batch-chart {
    height: 220px;
    display: flex;
    align-items: flex-end;
    gap: 8px;
    padding-top: 20px;
}

.chart-bar {
    flex: 1;
    background: linear-gradient(to top, var(--color-primary) 0%, var(--color-primary-light) 100%);
    border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;
    min-height: 20px;
    position: relative;
    transition: transform var(--transition-fast);
}

.chart-bar:hover {
    transform: scaleY(1.05);
}

.chart-bar::after {
    content: attr(data-value);
    position: absolute;
    top: -24px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
}

.chart-bar.sms {
    background: linear-gradient(to top, var(--color-sms) 0%, var(--color-sms-dark) 100%);
}

.chart-bar.email {
    background: linear-gradient(to top, var(--color-email) 0%, var(--color-email-dark) 100%);
}

.action-list {
    list-style: none;
    max-height: 260px;
    overflow-y: auto;
}

.action-list li {
    padding: 12px 0;
    border-bottom: 1px solid var(--border-color);
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.action-list li:last-child {
    border-bottom: none;
}

.action-time {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-left: auto;
}

/* ===== Quick Actions ===== */
.quick-actions h3 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.quick-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 12px;
}

.quick-action-btn {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.quick-action-btn:hover:not(:disabled) {
    border-color: var(--color-primary);
    background: var(--bg-hover);
    transform: translateY(-2px);
}

.quick-action-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.qa-icon {
    font-size: 24px;
}

/* ===== Empty State ===== */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    text-align: center;
    color: var(--text-secondary);
}

.empty-icon {
    font-size: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
}

.empty-state p {
    font-size: 14px;
}

/* ===== Import View ===== */
.import-container {
    max-width: 800px;
    margin: 0 auto;
}

.drop-zone {
    border: 2px dashed var(--border-color);
    border-radius: var(--border-radius-xl);
    padding: 60px 40px;
    text-align: center;
    background: var(--bg-card);
    transition: all var(--transition);
    cursor: pointer;
}

.drop-zone:hover,
.drop-zone.drag-over {
    border-color: var(--color-primary);
    background: var(--bg-hover);
}

.drop-zone.drag-over {
    transform: scale(1.02);
}

.drop-zone-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.drop-icon {
    font-size: 64px;
    opacity: 0.7;
}

.drop-zone h3 {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
}

.drop-zone p {
    color: var(--text-secondary);
    font-size: 14px;
}

.drop-divider {
    display: flex;
    align-items: center;
    width: 200px;
    margin: 8px 0;
}

.drop-divider::before,
.drop-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-color);
}

.drop-divider span {
    padding: 0 16px;
    color: var(--text-tertiary);
    font-size: 13px;
}

.import-options,
.import-preview {
    margin-top: 24px;
}

/* ===== Data View ===== */
.data-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    gap: 16px;
    flex-wrap: wrap;
}

.toolbar-left,
.toolbar-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.filter-section {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-status {
    font-size: 13px;
    color: var(--text-secondary);
    background: var(--bg-tertiary);
    padding: 4px 10px;
    border-radius: var(--border-radius-sm);
}

.search-box {
    position: relative;
}

.search-box input {
    padding-left: 36px;
    width: 250px;
}

.search-box::before {
    content: 'üîç';
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
}

.row-count {
    font-size: 13px;
    color: var(--text-secondary);
}

/* ===== Filter Panel ===== */
.filter-panel {
    background: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: var(--shadow);
}

.filter-builder {
    margin-bottom: 12px;
}

.filter-conditions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 12px;
}

.filter-condition {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-actions {
    display: flex;
    gap: 8px;
}

.filter-presets {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-top: 12px;
    border-top: 1px solid var(--border-color);
}

.filter-presets select {
    max-width: 200px;
}

.data-table tbody tr.selected {
    background: rgba(99, 102, 241, 0.15);
}

.cell-batch {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    padding: 4px 10px;
    border-radius: var(--border-radius-sm);
    font-weight: 600;
    font-size: 12px;
}

.cell-batch.sms {
    background: rgba(6, 182, 212, 0.15);
    color: var(--color-sms-dark);
}

.cell-batch.email {
    background: rgba(139, 92, 246, 0.15);
    color: var(--color-email-dark);
}

/* ===== Data Actions ===== */
/* Hidden - replaced by compact batch dropdown in table-header-bar */
.data-actions {
    display: none !important;
}

.batch-actions {
    display: flex;
    gap: 24px;
}

.action-group {
    display: flex;
    align-items: center;
    gap: 12px;
}

.action-group label {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
}

.header-sms-preview {
    flex: 1;
    min-width: 150px;
    max-width: 350px;
    margin: 0 12px;
    padding: 6px 12px;
    background: rgba(99, 102, 241, 0.08);
    border-radius: 6px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: flex;
    align-items: center;
    gap: 4px;
}

.header-sms-preview strong {
    color: var(--color-primary);
    font-weight: 600;
}

.undo-actions {
    display: flex;
    gap: 8px;
}

/* ===== Table Header Bar (Project Indicator + Batch Dropdown) ===== */
.table-header-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-card);
    border-radius: var(--border-radius);
    margin-bottom: 12px;
    box-shadow: var(--shadow-sm);
    flex-wrap: wrap;
    gap: 12px;
}

.current-project-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
}

.current-project-indicator .project-label {
    font-size: 13px;
    color: var(--text-secondary);
}

.current-project-indicator .project-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--color-primary);
    background: rgba(99, 102, 241, 0.1);
    padding: 4px 12px;
    border-radius: var(--border-radius-sm);
}

.batch-dropdown-container {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.batch-dropdown {
    position: relative;
}

.batch-dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 100;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    min-width: 280px;
    padding: 8px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

.batch-dropdown-menu .dropdown-section {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.batch-dropdown-menu .dropdown-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    padding: 4px 8px;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 4px;
}

.batch-dropdown-menu button {
    background: var(--bg-tertiary);
    border: none;
    padding: 6px 12px;
    border-radius: var(--border-radius-sm);
    font-size: 12px;
    cursor: pointer;
    text-align: left;
    transition: all var(--transition-fast);
}

.batch-dropdown-menu button:hover {
    background: var(--color-primary);
    color: white;
}

.delete-batch-compact {
    display: flex;
    align-items: center;
    gap: 4px;
}

.delete-batch-compact select {
    width: 70px;
    font-size: 12px;
    padding: 4px 6px;
}

/* ===== Export View ===== */
.export-container {
    max-width: 900px;
    margin: 0 auto;
    display: grid;
    gap: 24px;
}

.export-type-tabs {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    margin-bottom: 20px;
}

.tab-btn {
    flex: 1;
    padding: 10px 16px;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-sm);
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.tab-btn:hover {
    color: var(--text-primary);
}

.tab-btn.active {
    background: var(--bg-primary);
    color: var(--color-primary);
    box-shadow: var(--shadow-sm);
}

.export-panel {
    animation: fadeIn var(--transition);
}

.export-preview-info {
    padding: 12px 16px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    margin: 16px 0;
}

.column-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.filter-tag {
    display: inline-flex;
    align-items: center;
    background: white;
    border: 1px solid rgba(99, 102, 241, 0.2);
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    color: var(--text-secondary);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    cursor: pointer;
    transition: all 0.2s;
}

.filter-tag:hover {
    background: rgba(99, 102, 241, 0.05);
    border-color: var(--color-primary);
    transform: translateY(-1px);
}

.filter-tag strong {
    color: var(--color-primary);
    margin-right: 4px;
}

.chip {
    display: inline-flex;
    align-items: center;
    padding: 6px 12px;
    background: var(--bg-tertiary);
    border-radius: 20px;
    font-size: 13px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.chip.active {
    background: var(--color-primary);
    color: white;
}

.chip:hover:not(.active) {
    background: var(--border-color);
}

.column-selector {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 8px;
    max-height: 200px;
    overflow-y: auto;
    padding: 8px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
}

.column-selector label {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px;
    background: var(--bg-primary);
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    cursor: pointer;
    transition: background var(--transition-fast);
}

.column-selector label:hover {
    background: var(--bg-hover);
}

.export-history-list {
    list-style: none;
    max-height: 300px;
    overflow-y: auto;
}

.export-history-list li {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    border-bottom: 1px solid var(--border-color);
}

.export-history-list li:last-child {
    border-bottom: none;
}

/* ===== Config View ===== */
.config-container {
    max-width: 800px;
    margin: 0 auto;
    display: grid;
    gap: 24px;
}

.config-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.template-library {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--border-color);
}

.template-library>label {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 12px;
    display: block;
}

.template-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
}

.template-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
}

.template-name {
    font-size: 14px;
    font-weight: 500;
}

.template-actions {
    display: flex;
    gap: 8px;
}

/* ===== Forms ===== */
.form-group {
    margin-bottom: 0px;
}

.form-group:last-child {
    margin-bottom: 0;
}

.form-group label {
    display: block;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 6px;
}

.form-group.inline {
    display: flex;
    align-items: center;
    gap: 12px;
}

.form-group.inline label {
    margin-bottom: 0;
}

.form-control {
    width: 100%;
    padding: 10px 14px;
    font-size: 14px;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    background: var(--bg-primary);
    color: var(--text-primary);
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.form-control:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
}

.form-control-sm {
    padding: 6px 10px;
    font-size: 13px;
}

textarea.form-control {
    resize: vertical;
    min-height: 80px;
}

.form-hint {
    font-size: 12px;
    color: var(--text-tertiary);
    margin-top: 4px;
    display: block;
}

.checkbox-group label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-weight: 400;
    color: var(--text-primary);
}

.checkbox-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: var(--color-primary);
}

/* ===== Buttons ===== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 18px;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    white-space: nowrap;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-primary {
    background: var(--color-primary);
    color: white;
}

.btn-primary:hover:not(:disabled) {
    background: var(--color-primary-dark);
    transform: translateY(-1px);
}

.btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.btn-secondary:hover:not(:disabled) {
    background: var(--border-color);
}

.btn-outline {
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-primary);
}

.btn-outline:hover:not(:disabled) {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.btn-danger {
    background: var(--color-danger);
    color: white;
}

.btn-danger:hover:not(:disabled) {
    background: #dc2626;
}

.btn-sms {
    background: var(--color-sms);
    color: white;
}

.btn-sms:hover:not(:disabled) {
    background: var(--color-sms-dark);
}

.btn-email {
    background: var(--color-email);
    color: white;
}

.btn-email:hover:not(:disabled) {
    background: var(--color-email-dark);
}

.btn-icon {
    padding: 8px;
    font-size: 18px;
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
}

.btn-icon:hover:not(:disabled) {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

.btn-xs {
    padding: 3px 8px;
    font-size: 11px;
}

.btn-lg {
    padding: 14px 28px;
    font-size: 16px;
}

.btn-group {
    display: flex;
    gap: 4px;
}

.btn-group .btn {
    border-radius: 0;
}

.btn-group .btn:first-child {
    border-radius: var(--border-radius-sm) 0 0 var(--border-radius-sm);
}

.btn-group .btn:last-child {
    border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
}

/* ===== Toast Notifications ===== */
.toast-container {
    position: fixed;
    bottom: 24px;
    right: 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    z-index: 1000;
}

.toast {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 20px;
    background: var(--bg-card);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    min-width: 300px;
    max-width: 450px;
    animation: slideInRight var(--transition);
}

.toast.success {
    border-left: 4px solid var(--color-success);
}

.toast.error {
    border-left: 4px solid var(--color-danger);
}

.toast.warning {
    border-left: 4px solid var(--color-warning);
}

.toast.info {
    border-left: 4px solid var(--color-info);
}

.toast-icon {
    font-size: 20px;
}

.toast-content {
    flex: 1;
}

.toast-title {
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary);
}

.toast-message {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 2px;
}

.toast-close {
    background: none;
    border: none;
    font-size: 18px;
    color: var(--text-tertiary);
    cursor: pointer;
    padding: 4px;
}

.toast-close:hover {
    color: var(--text-primary);
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ===== Data View Layout */
.data-view-layout {
    display: flex;
    gap: 16px;
    height: 100%;
    align-items: flex-start;
}

.data-view-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
    /* Prevent overflow */
    gap: 12px;
}

.data-view-sidebar {
    width: 320px;
    flex-shrink: 0;
    position: sticky;
    top: 0;
}

/* Adjust project info panel for sidebar */
.project-info-panel {
    max-width: 100% !important;
    /* Override inline style */
}

/* Responsive adjustments */
@media (max-width: 1200px) {
    .data-view-layout {
        flex-direction: column;
    }

    .data-view-sidebar {
        width: 100%;
        position: static;
        margin-bottom: 16px;
    }
}

/* ===== Modal ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition);
    animation: fadeIn 0.2s ease-out;
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--bg-card);
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    transform: scale(0.9);
    transition: transform var(--transition);
}

.modal-overlay.active .modal {
    transform: scale(1);
}

.modal-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal-title {
    font-size: 18px;
    font-weight: 600;
}

.modal-close {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-tertiary);
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.modal-close:hover {
    color: var(--text-primary);
}

.modal-body {
    padding: 20px;
    overflow-y: auto;
    max-height: calc(90vh - 130px);
}

.modal-footer {
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

/* ===== Table Container ===== */
.table-container {
    overflow-x: auto;
}

/* ===== Responsive ===== */
@media (max-width: 1024px) {
    .dashboard-content {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .sidebar {
        width: var(--sidebar-collapsed-width);
        transform: translateX(-100%);
    }

    .sidebar.mobile-open {
        transform: translateX(0);
        width: var(--sidebar-width);
    }

    .sidebar.mobile-open .logo-text,
    .sidebar.mobile-open .nav-text,
    .sidebar.mobile-open .version {
        display: block;
    }

    .main-content {
        margin-left: 0;
    }

    .mobile-menu-btn {
        display: block;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .data-toolbar {
        flex-direction: column;
        align-items: stretch;
    }

    .toolbar-left,
    .toolbar-right {
        justify-content: space-between;
    }

    .search-box input {
        width: 100%;
    }

    .batch-actions {
        flex-direction: column;
        gap: 12px;
    }

    .data-actions {
        flex-direction: column;
        gap: 16px;
    }



    .export-type-tabs {
        flex-direction: column;
    }
}

@media (max-width: 480px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }

    .quick-actions-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .content-wrapper {
        padding: 16px;
    }
}

/* ===== Scrollbar Styling ===== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-tertiary);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
}

/* ===== Loading Spinner ===== */
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-color);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* ===== Table Row Number ===== */
.row-number {
    color: var(--text-tertiary);
    font-size: 12px;
    font-weight: 500;
}

/* ===== Highlighted Text ===== */
.highlight {
    background: rgba(251, 191, 36, 0.3);
    padding: 0 2px;
    border-radius: 2px;
}

/* ===== Multi-Select Dropdown ===== */
.multi-select-container {
    position: relative;
    width: 200px;
}

.multi-select-trigger {
    cursor: pointer;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    padding: 6px 10px;
    font-size: 13px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.multi-select-trigger::after {
    content: '‚ñº';
    font-size: 10px;
    margin-left: 8px;
    opacity: 0.5;
}

.multi-select-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    min-width: 200px;
    max-height: 250px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    margin-top: 4px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.multi-select-search {
    width: 100%;
    padding: 6px;
    font-size: 12px;
}

.multi-select-actions {
    display: flex;
    gap: 4px;
    padding: 4px 0;
    border-bottom: 1px solid var(--border-color);
}

.multi-select-actions .btn {
    flex: 1;
}

.multi-select-options {
    overflow-y: auto;
    max-height: 200px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 8px;
    cursor: pointer;
    border-radius: 4px;
    transition: background var(--transition-fast);
}

.dropdown-item:hover {
    background: var(--bg-tertiary);
}

.dropdown-item input[type="checkbox"] {
    width: 14px;
    height: 14px;
    accent-color: var(--color-primary);
}

.dropdown-item span {
    font-size: 13px;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Multi-select Styles */
.multi-select-container {
    position: relative;
    width: 200px;
}

.multi-select-trigger {
    background: var(--bg-card);
    cursor: pointer;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    user-select: none;
    display: flex;
    align-items: center;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    padding: 6px 12px;
    font-size: 14px;
    height: 38px;
}

.multi-select-trigger:after {
    content: '';
    font-size: 10px;
    margin-left: auto;
    opacity: 0.5;
}

.multi-select-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    z-index: 1000;
    max-height: 250px;
    display: flex;
    flex-direction: column;
}

.multi-select-search {
    border: none;
    border-bottom: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;
    padding: 8px;
    background: var(--bg-secondary);
    min-height: 36px;
}

.multi-select-search:focus {
    box-shadow: none;
    outline: none;
}

.multi-select-options {
    flex: 1;
    overflow-y: auto;
    padding: 4px 0;
}

.dropdown-item {
    display: flex;
    align-items: center;
    padding: 6px 10px;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.2s;
    color: var(--text-primary);
}

.dropdown-item:hover {
    background: var(--bg-secondary);
}

.dropdown-item input {
    margin-right: 8px;
}

/* ===== Compact Filter UI ===== */
.filter-condition select.filter-column {
    flex: 0 0 160px !important;
    width: 160px !important;
    max-width: 160px !important;
}

.filter-condition select.filter-operator {
    flex: 0 0 140px !important;
    width: 140px !important;
    max-width: 140px !important;
}

.filter-condition input.filter-value,
.filter-condition .multi-select-container {
    flex: 1;
    min-width: 120px;
    max-width: 300px !important;
}

/* ===== Logo Image ===== */
.logo-icon-img {
    width: 36px;
    height: 36px;
    object-fit: contain;
    border-radius: 8px;
}

/* ===== Button Icon Image ===== */
.btn-icon-img {
    width: 18px;
    height: 18px;
    object-fit: contain;
    vertical-align: middle;
    margin-right: 4px;
}

/* ===== Empty State Image ===== */
.empty-icon-img {
    width: 80px;
    height: 80px;
    object-fit: contain;
    margin-bottom: 16px;
    opacity: 0.8;
}

/* ===== Pagination Controls ===== */
.pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-card);
    border-top: 1px solid var(--border-color);
    border-radius: 0 0 var(--border-radius) var(--border-radius);
    gap: 16px;
    flex-wrap: wrap;
}

.pagination-info {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 13px;
    color: var(--text-secondary);
}

.pagination-info select {
    width: auto;
    min-width: 70px;
}

.page-info {
    font-weight: 500;
    color: var(--text-primary);
}

.pagination-buttons {
    display: flex;
    align-items: center;
    gap: 8px;
}

.page-numbers {
    display: flex;
    gap: 4px;
}

.page-numbers button {
    min-width: 32px;
    padding: 4px 8px;
}

.page-numbers button.active {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

/* ===== Column Visibility ===== */
.column-visibility-dropdown {
    position: relative;
}

.column-visibility-panel {
    position: absolute;
    top: 100%;
    left: 0;
    width: 250px;
    max-height: 350px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    margin-top: 4px;
    overflow: hidden;
}

.column-visibility-panel .panel-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
    font-weight: 500;
    font-size: 13px;
}

.column-visibility-panel .panel-header span {
    flex: 1;
}

.column-list {
    max-height: 280px;
    overflow-y: auto;
    padding: 8px;
}

.column-list label {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    transition: background var(--transition-fast);
}

.column-list label:hover {
    background: var(--bg-tertiary);
}

.column-list input[type="checkbox"] {
    width: 14px;
    height: 14px;
    accent-color: var(--color-primary);
}

/* ===== Header Spacing Fix ===== */
.main-header {
    padding-top: 8px;
}

.project-manager {
    margin-top: 4px;
}

/* ===== Toolbar Enhancement ===== */
.toolbar-left {
    flex-wrap: wrap;
    gap: 12px !important;
}

/* ===== Notification Bell ===== */
.notification-bell {
    position: relative;
    z-index: 100;
}

.notification-btn {
    position: relative;
    padding: 8px;
}

.bell-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.notification-badge {
    position: absolute;
    top: 2px;
    right: 2px;
    background: var(--color-danger);
    color: white;
    font-size: 10px;
    font-weight: bold;
    padding: 2px 5px;
    border-radius: 10px;
    min-width: 16px;
    text-align: center;
}

.notification-panel {
    position: absolute;
    top: 100%;
    right: 0;
    width: 300px;
    max-height: 400px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    z-index: 1100;
    margin-top: 8px;
    overflow: hidden;
}

.notification-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
    font-weight: 600;
}

.notification-list {
    max-height: 340px;
    overflow-y: auto;
}

.notification-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background var(--transition-fast);
}

.notification-item:hover {
    background: var(--bg-tertiary);
}

.notification-item.unread {
    background: var(--color-primary-light);
}

.notification-icon {
    font-size: 20px;
}

.notification-content {
    flex: 1;
}

.notification-title {
    font-weight: 500;
    font-size: 13px;
}

.notification-time {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 2px;
}

.notification-empty {
    padding: 24px;
    text-align: center;
    color: var(--text-secondary);
}

/* ===== Delete Batch Button ===== */
.btn-danger {
    background: var(--color-danger);
    color: white;
    border-color: var(--color-danger);
}

.btn-danger:hover {
    background: #c82333;
    border-color: #bd2130;
}

.delete-batch-group {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--bg-tertiary);
    padding: 8px 12px;
    border-radius: var(--border-radius);
    border: 1px dashed var(--color-danger);
    flex-shrink: 0;
    position: relative;
    min-width: max-content;
}

/* All selected indicator in multi-select */
.all-selected {
    color: var(--color-success, #22c55e);
    font-weight: 600;
}

/* ===== URL Import Module ===== */
.url-import-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.url-import-card {
    max-width: 800px;
}

.url-import-form .input-group {
    display: flex;
    gap: 12px;
}

.url-import-form .input-group input {
    flex: 1;
}

.url-history-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--border-color);
}

.url-history-section label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
}

.url-data-card {
    flex: 1;
}

.url-data-card .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 12px;
}

.url-data-info {
    font-size: 13px;
    color: var(--text-secondary);
}

.url-pagination-controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 16px;
}

/* Form row layout */
.form-row {
    display: flex;
    gap: 12px;
    align-items: flex-end;
}

.form-row .flex-2 {
    flex: 2;
}

.form-row .flex-1 {
    flex: 1;
}

.form-row .flex-0 {
    flex: 0 0 auto;
}

/* URL Toolbar */
.url-toolbar {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
}

.url-filter-group {
    display: flex;
    gap: 8px;
    align-items: center;
}

.url-filter-group select {
    min-width: 120px;
}

/* URL visibility dropdown */
.url-visibility-dropdown {
    position: relative;
}

.url-visibility-panel {
    position: absolute;
    top: 100%;
    right: 0;
    width: 220px;
    max-height: 300px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    z-index: 1100;
    margin-top: 4px;
    overflow: hidden;
}

.url-visibility-panel .panel-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.url-visibility-panel .panel-header span {
    flex: 1;
    font-weight: 500;
}

.url-visibility-panel .column-list {
    max-height: 240px;
    overflow-y: auto;
    padding: 8px;
}

.url-visibility-panel .column-list label {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
}

.url-visibility-panel .column-list label:hover {
    background: var(--bg-tertiary);
}

/* Compact URL Table */
.url-table-compact {
    max-height: 500px;
    overflow: auto;
}

.url-table {
    font-size: 12px;
}

.url-table th {
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 8px 6px !important;
}

.url-table td {
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 6px !important;
}

/* Pagination layout */
.pagination-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.pagination-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.pagination-right select {
    width: 70px;
}

/* Table body fixed height */
.url-table-body {
    padding: 0 !important;
}

/* ===== Starred Projects ===== */
.starred-projects-card {
    min-height: 150px;
}

.starred-projects-card .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.header-icon {
    width: 22px;
    height: 22px;
    vertical-align: middle;
    margin-right: 6px;
}

.relax-icon {
    width: 40px;
    height: 40px;
    object-fit: contain;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.relax-icon:hover {
    transform: scale(1.2) rotate(10deg);
}

.starred-projects-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.starred-project-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all var(--transition-fast);
    border: 1px solid transparent;
}

.starred-project-item:hover {
    background: var(--color-primary-light);
    border-color: var(--color-primary);
}

.starred-project-item .star-icon {
    width: 18px;
    height: 18px;
}

.starred-project-item .project-name {
    font-weight: 500;
    font-size: 13px;
}

.starred-project-item .unstar-btn {
    opacity: 0;
    transition: opacity 0.2s;
    font-size: 12px;
    padding: 2px 4px;
}

.starred-project-item:hover .unstar-btn {
    opacity: 1;
}

.no-starred {
    color: var(--text-secondary);
    font-size: 13px;
    font-style: italic;
}

/* Star toggle button */
.star-toggle {
    padding: 4px 6px;
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 16px;
    opacity: 0.5;
    transition: opacity 0.2s, transform 0.2s;
}

.star-toggle:hover {
    opacity: 1;
    transform: scale(1.2);
}

.star-toggle.starred {
    opacity: 1;
}

/* Search icon */
.search-icon {
    width: 18px;
    height: 18px;
    vertical-align: middle;
}

/* URL Filter Dropdown */
.url-filter-dropdown {
    position: relative;
}

.url-filter-panel {
    position: absolute;
    top: 100%;
    left: 0;
    width: 250px;
    max-height: 350px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    z-index: 1100;
    margin-top: 4px;
    display: flex;
    flex-direction: column;
}

.url-filter-panel .panel-header,
.url-filter-panel .panel-footer {
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 8px;
}

.url-filter-panel .panel-footer {
    border-bottom: none;
    border-top: 1px solid var(--border-color);
    justify-content: flex-end;
}

.url-filter-panel .panel-header span {
    flex: 1;
    font-weight: 500;
    font-size: 13px;
}

.filter-values-list {
    flex: 1;
    overflow-y: auto;
    max-height: 250px;
    padding: 8px;
}

.filter-values-list label {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 5px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
}

.filter-values-list label:hover {
    background: var(--bg-tertiary);
}

/* ===== URL History List ===== */
.url-history-section {
    margin-top: 16px;
    border-top: 1px solid var(--border-color);
    padding-top: 16px;
}

.url-history-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
}

.url-history-header label {
    font-weight: 500;
    font-size: 14px;
    color: var(--text-secondary);
}

.url-history-actions {
    display: flex;
    gap: 4px;
}

.url-history-list {
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    max-height: 300px;
    overflow-y: auto;
}

.url-history-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background var(--transition-fast);
}

.url-history-item:last-child {
    border-bottom: none;
}

.url-history-item:hover {
    background: var(--bg-hover);
}

.url-history-info {
    flex: 1;
    min-width: 0;
}

.url-history-name {
    font-weight: 500;
    font-size: 13px;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.url-history-meta {
    font-size: 11px;
    color: var(--text-tertiary);
    display: flex;
    gap: 8px;
}

.url-history-delete {
    background: transparent;
    border: none;
    color: var(--text-tertiary);
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    transition: all var(--transition-fast);
    opacity: 0;
}

.url-history-item:hover .url-history-delete {
    opacity: 1;
}

.url-history-delete:hover {
    background: rgba(239, 68, 68, 0.15);
    color: var(--color-danger);
}

.url-history-empty {
    padding: 20px;
    text-align: center;
    color: var(--text-tertiary);
    font-size: 13px;
}

/* ===== Projects Management View ===== */
.projects-container {
    max-width: 1400px;
    margin: 0 auto;
}

.projects-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
}

.projects-header h2 {
    font-size: 24px;
    font-weight: 600;
    color: var(--text-primary);
}

.projects-layout {
    display: grid;
    grid-template-columns: 350px 1fr;
    gap: 24px;
}

/* Project List Panel */
.projects-list-panel .card-body {
    padding: 0;
    max-height: 600px;
    overflow-y: auto;
}

.projects-list {
    padding: 0;
}

.project-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.project-item:last-child {
    border-bottom: none;
}

.project-item:hover {
    background: var(--bg-hover);
}

.project-item.active {
    background: var(--bg-hover);
    border-left: 3px solid var(--color-primary);
}

.project-item-icon {
    width: 40px;
    height: 40px;
    border-radius: var(--border-radius);
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    color: white;
    transition: opacity 0.2s ease;
}

.project-icon-img {
    width: 36px;
    height: 36px;
    object-fit: contain;
}

.project-item-icon.no-data {
    opacity: 0.7;
}

.project-item-icon.no-data .project-icon-img {
    opacity: 0.8;
}

.project-item-info {
    flex: 1;
    min-width: 0;
}

.project-item-name {
    font-weight: 500;
    font-size: 14px;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.project-item-meta {
    font-size: 12px;
    color: var(--text-tertiary);
    display: flex;
    gap: 8px;
}

.project-item-badge {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 10px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.project-item-badge.active {
    background: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
}

/* Project Detail Panel */
.project-detail-panel .card {
    height: fit-content;
}

.project-actions {
    display: flex;
    gap: 8px;
}

.project-info-section {
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-color);
}

.info-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 0;
}

.info-label {
    font-size: 13px;
    color: var(--text-secondary);
    min-width: 100px;
}

.info-value {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.project-criteria-section,
.project-notes-section,
.project-quota-section {
    margin-bottom: 20px;
}

.project-criteria-section h4,
.project-notes-section h4,
.project-quota-section h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.criteria-text,
.notes-text {
    font-size: 14px;
    color: var(--text-primary);
    line-height: 1.6;
    white-space: pre-wrap;
    background: var(--bg-tertiary);
    padding: 12px;
    border-radius: var(--border-radius);
}

/* Quota Section */
.quota-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
}

.quota-header h4 {
    margin-bottom: 0;
}

.quota-last-fetch {
    font-size: 11px;
    color: var(--text-tertiary);
    margin-bottom: 12px;
}

.quota-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
}

.quota-item {
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    padding: 12px;
}

.quota-item-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
}

.quota-item-name {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
}

.quota-item-count {
    font-size: 12px;
    color: var(--text-secondary);
}

.quota-progress {
    height: 8px;
    background: var(--bg-secondary);
    border-radius: 4px;
    overflow: hidden;
}

.quota-progress-fill {
    height: 100%;
    border-radius: 4px;
    transition: width var(--transition);
}

.quota-progress-fill.low {
    background: linear-gradient(90deg, var(--color-danger) 0%, #f87171 100%);
}

.quota-progress-fill.medium {
    background: linear-gradient(90deg, var(--color-warning) 0%, #fbbf24 100%);
}

.quota-progress-fill.high {
    background: linear-gradient(90deg, var(--color-success) 0%, #34d399 100%);
}

.quota-progress-fill.complete {
    background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
}

.quota-summary {
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    padding: 12px;
    display: flex;
    gap: 24px;
}

.summary-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.summary-label {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
}

.summary-value {
    font-size: 20px;
    font-weight: 700;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.summary-value.highlight {
    color: #facc15;
    background: rgba(250, 204, 21, 0.15);
    padding: 4px 10px;
    border-radius: 6px;
}

/* Responsive */
@media (max-width: 900px) {
    .projects-layout {
        grid-template-columns: 1fr;
    }

    .projects-list-panel .card-body {
        max-height: 300px;
    }
}

/* Project Panels Wrapper - 2 column layout */
.project-panels-wrapper {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

/* Project Info Panel in Data View */
.project-info-panel {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    overflow: hidden;
    width: 350px;
    max-width: 100%;
    flex-shrink: 0;
}

@media (max-width: 768px) {
    .project-panels-wrapper {
        flex-direction: column;
    }

    .project-info-panel {
        width: 100%;
    }
}

.project-info-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-tertiary);
    cursor: pointer;
}

.project-info-panel-header h4 {
    font-size: 14px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
}

.project-info-panel-toggle {
    background: none;
    border: none;
    font-size: 14px;
    color: var(--text-secondary);
    cursor: pointer;
}

.project-info-panel-body {
    padding: 12px 16px;
    font-size: 13px;
    line-height: 1.6;
}

.project-info-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

@media (max-width: 768px) {
    .project-info-grid {
        grid-template-columns: 1fr;
    }
}

.project-info-left {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.project-info-right {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.project-info-panel-body .info-line {
    display: flex;
    gap: 8px;
    margin-bottom: 4px;
}

.project-info-panel-body .quota-mini {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
}

.quota-mini-item {
    background: var(--bg-tertiary);
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    color: var(--text-secondary);
}

.quota-mini-item.remaining {
    background: rgba(99, 102, 241, 0.15);
    color: var(--color-primary);
    font-weight: 500;
}

/* Enhanced Quota Display in Filter & Batch */
.quota-summary-mini {
    margin-top: 12px;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
}

.quota-headline {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.quota-total {
    font-weight: 600;
    color: var(--color-primary);
}

.quota-remaining {
    color: var(--text-secondary);
    font-size: 12px;
}

.quota-progress-mini {
    height: 8px;
    background: var(--border-color);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 12px;
}

.quota-bar-full {
    height: 100%;
    background: linear-gradient(90deg, var(--color-primary), var(--color-primary-light));
    border-radius: 4px;
    transition: width 0.3s ease;
}

.quota-details-mini {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.quota-item-mini {
    display: grid;
    grid-template-columns: 1fr auto auto;
    align-items: center;
    gap: 8px;
    font-size: 12px;
}

.quota-item-mini .quota-name {
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.quota-item-mini .quota-count {
    color: var(--text-secondary);
    font-weight: 500;
}

.quota-bar-mini {
    width: 60px;
    height: 6px;
    background: var(--border-color);
    border-radius: 3px;
    overflow: hidden;
}

.quota-fill-mini {
    height: 100%;
    background: var(--color-success);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.quota-bar-mini.near .quota-fill-mini {
    background: var(--color-warning);
}

.quota-bar-mini.complete .quota-fill-mini {
    background: var(--color-primary);
}

/* Quota Expand Button */
.quota-expand-btn {
    display: inline-block;
    background: #374151;
    color: #ffffff;
    padding: 2px 10px;
    border-radius: 4px;
    font-size: 11px;
    cursor: pointer;
    margin-left: 8px;
    border: 1px solid #4b5563;
    font-weight: 500;
}

.quota-expand-btn:hover {
    background: #4b5563;
}

/* Vendor Row Alignment */
.vendor-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
}

.vendor-row .vendor-logo {
    width: 100px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
}

.vendor-row .vendor-logo img {
    height: 24px;
    width: auto;
    object-fit: contain;
}

.vendor-row .vendor-logo a {
    display: inline-flex;
    align-items: center;
    text-decoration: none;
}

.vendor-row .vendor-name {
    font-weight: 500;
    min-width: 100px;
    color: var(--color-primary);
}

.vendor-row .vendor-name a {
    color: var(--color-primary);
    text-decoration: none;
}

.vendor-row .vendor-name a:hover {
    text-decoration: underline;
}

/* Project Data Section */
.project-data-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
}

.project-data-section h4 {
    font-size: 14px;
    margin-bottom: 8px;
    color: var(--text-primary);
}

.data-info {
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
}

.data-info-content p {
    margin: 4px 0;
    font-size: 13px;
    color: var(--text-secondary);
}

.data-info-content p strong {
    color: var(--text-primary);
}

.no-data-text {
    font-size: 13px;
    color: var(--text-tertiary);
    font-style: italic;
}

/* API Status Badge */
.api-status {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 12px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.api-status.configured {
    background: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
}

/* Collapsible Quota Details */
.quota-details-mini.collapsed {
    display: none;
}

.quota-expand-btn {
    margin-left: auto;
    font-size: 10px;
    color: var(--text-tertiary);
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--bg-tertiary);
    transition: all 0.2s ease;
}

.quota-headline:hover .quota-expand-btn {
    background: var(--color-primary);
    color: white;
}

/* Star/Favorite Projects */
.project-star {
    color: var(--text-tertiary);
    cursor: pointer;
    font-size: 16px;
    transition: all 0.2s ease;
}

.project-star:hover {
    color: var(--color-warning);
    transform: scale(1.2);
}

.project-star.starred {
    color: var(--color-warning);
}

.project-card .star-container {
    position: absolute;
    top: 8px;
    right: 8px;
}

#quotaDetailsProjects.collapsed {
    display: none;
}

/* ===== Data Table Enhanced Styles ===== */

/* Table Container */
.data-table-container {
    overflow-x: auto;
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    background: var(--bg-card);
}

/* Data Table */
.data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

/* Table Header */
.data-table thead th {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 12px 10px;
    text-align: left;
    border-bottom: 2px solid var(--border-color);
    border-right: 1px solid var(--border-color);
    white-space: nowrap;
    position: sticky;
    top: 0;
    z-index: 10;
}

.data-table thead th:last-child {
    border-right: none;
}

/* Table Body */
.data-table tbody td {
    padding: 10px;
    border-bottom: 1px solid var(--border-color);
    border-right: 1px solid var(--border-color);
    color: var(--text-primary);
    vertical-align: middle;

    /* Ellipsis for long text */
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.data-table tbody td:last-child {
    border-right: none;
}

/* Hover effect on rows */
.data-table tbody tr:hover {
    background: var(--bg-hover);
}

/* Alternating row colors (zebra stripes) */
.data-table tbody tr:nth-child(even) {
    background: var(--bg-secondary);
}

.data-table tbody tr:nth-child(even):hover {
    background: var(--bg-hover);
}

/* Selected row */
.data-table tbody tr.selected {
    background: rgba(99, 102, 241, 0.15) !important;
}

/* Compact table variant */
.data-table.compact tbody td {
    padding: 6px 8px;
    max-width: 150px;
}

.data-table.compact thead th {
    padding: 8px;
    font-size: 11px;
}

/* Cell with tooltip indicator */
.data-table tbody td.has-tooltip {
    cursor: help;
}

/* Custom tooltip for truncated cells */
.data-table tbody td[title]:hover {
    position: relative;
}

/* Batch cell styling (override ellipsis) */
.data-table tbody td .cell-batch {
    display: inline-flex;
    white-space: nowrap;
    overflow: visible;
}

/* Row index/number column */
.data-table tbody td:first-child,
.data-table thead th:first-child {
    width: 50px;
    min-width: 50px;
    text-align: center;
    color: var(--text-tertiary);
}

/* Checkbox column */
.data-table td.checkbox-cell,
.data-table th.checkbox-cell {
    width: 40px;
    min-width: 40px;
    text-align: center;
}

/* Action buttons in table */
.data-table .row-actions {
    display: flex;
    gap: 4px;
    justify-content: center;
}

/* Empty table state */
.data-table tbody tr.empty-row td {
    text-align: center;
    padding: 40px;
    color: var(--text-tertiary);
    font-style: italic;
}

/* Responsive table */
@media screen and (max-width: 768px) {
    .data-table tbody td {
        max-width: 120px;
    }

    .data-table.compact tbody td {
        max-width: 100px;
    }
}

/* ===== MOBILE RESPONSIVE - iPhone & Android ===== */

/* Mobile Global */
@media screen and (max-width: 480px) {
    :root {
        --border-radius: 8px;
        --border-radius-lg: 12px;
    }

    body {
        font-size: 14px;
    }

    /* Header mobile */
    .header {
        padding: 8px 12px;
        flex-wrap: wrap;
        gap: 8px;
    }

    .header-left {
        flex: 1;
        min-width: 0;
    }

    .header-right {
        flex-wrap: wrap;
        gap: 8px;
        width: 100%;
        justify-content: space-between;
    }

    .project-selector {
        flex: 1;
        min-width: 0;
    }

    .project-selector select {
        width: 100%;
        font-size: 13px;
        padding: 8px;
    }

    .header-actions {
        gap: 6px;
    }

    .header-actions .btn {
        padding: 6px 10px;
        font-size: 12px;
    }

    .starred-projects {
        flex-wrap: wrap;
        gap: 4px;
    }

    .starred-project {
        font-size: 10px;
        padding: 3px 6px;
    }

    /* Sidebar mobile */
    .sidebar {
        position: relative;
        left: 0;
        top: 0;
        height: 100%;
        width: 240px;
        transform: translateX(-100%);
        z-index: 1000;
    }

    .sidebar.mobile-open {
        transform: translateX(0);
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
    }

    /* Mobile menu overlay */
    .mobile-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }

    .mobile-overlay.active {
        display: block;
    }

    /* Main content mobile */
    .main-content {
        margin-left: 0;
        padding-bottom: 70px;
        /* Space for bottom nav */
    }

    .content-wrapper {
        padding: 12px;
    }

    /* Mobile menu button */
    .mobile-menu-btn {
        display: flex !important;
        padding: 8px;
        font-size: 22px;
    }

    /* Cards mobile */
    .card {
        border-radius: 12px;
    }

    .card-header {
        padding: 12px 14px;
    }

    .card-header h3 {
        font-size: 14px;
    }

    .card-body {
        padding: 14px;
    }

    .card-footer {
        padding: 12px 14px;
        flex-wrap: wrap;
        gap: 8px;
    }

    /* Buttons mobile - Touch friendly */
    .btn {
        min-height: 44px;
        /* iOS touch target */
        padding: 10px 16px;
    }

    .btn-sm {
        min-height: 36px;
        padding: 8px 12px;
    }

    .btn-xs {
        min-height: 32px;
        padding: 6px 10px;
    }

    .btn-group {
        flex-wrap: wrap;
    }

    /* Forms mobile */
    .form-control {
        font-size: 16px;
        /* Prevents iOS zoom */
        padding: 12px;
        min-height: 44px;
    }

    .form-control-sm {
        font-size: 14px;
        min-height: 40px;
        padding: 10px;
    }

    .form-group {
        margin-bottom: 16px;
    }

    select.form-control {
        -webkit-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 16px;
        padding-right: 35px;
    }

    /* Data toolbar mobile */
    .data-toolbar {
        flex-direction: column;
        gap: 10px;
        padding: 10px;
    }

    .toolbar-left,
    .toolbar-right {
        width: 100%;
        flex-wrap: wrap;
        gap: 8px;
    }

    .search-box {
        flex: 1;
        min-width: 100%;
    }

    .search-box input {
        width: 100%;
    }

    .partner-logos {
        display: none !important;
        /* Hide logos on mobile */
    }

    /* Filter panel mobile */
    .filter-panel {
        padding: 12px;
    }

    .filter-condition {
        flex-direction: column;
        gap: 8px;
    }

    .filter-condition select,
    .filter-condition input,
    .filter-condition .multi-select-container {
        width: 100% !important;
        max-width: 100% !important;
        flex: none !important;
    }

    /* Table mobile */
    .data-table-container {
        margin: 0 -12px;
        padding: 0 12px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .data-table {
        font-size: 12px;
    }

    .data-table thead th,
    .data-table tbody td {
        padding: 8px 6px;
        white-space: nowrap;
    }

    .data-table tbody td {
        max-width: 100px;
    }

    /* Pagination mobile */
    .pagination-controls {
        flex-direction: column;
        gap: 12px;
    }

    .pagination-info {
        flex-wrap: wrap;
        justify-content: center;
    }

    .pagination-buttons {
        flex-wrap: wrap;
        justify-content: center;
    }

    .page-numbers {
        display: none;
        /* Hide page numbers on mobile */
    }

    .page-title {
        display: none !important;
        /* Always hide title on mobile to save space */
    }

    /* Batch actions mobile */
    .data-actions {
        flex-direction: column;
        gap: 12px;
        padding: 12px;
    }

    .action-group {
        width: 100%;
    }

    .action-group label {
        width: 100%;
        margin-bottom: 8px;
    }

    .action-group .btn-group {
        width: 100%;
    }

    .action-group .btn-group .btn {
        flex: 1;
    }

    /* Project info panel mobile */
    .project-info-panel {
        max-width: 100% !important;
    }

    .project-info-panel-header h4 {
        font-size: 13px;
    }

    .project-info-panel-body {
        padding: 10px 12px;
    }

    /* Toast mobile */
    .toast-container {
        left: 10px;
        right: 10px;
        bottom: 80px;
    }

    .toast {
        min-width: auto;
        width: 100%;
    }

    /* Modal mobile */
    .modal {
        width: 95%;
        max-width: none;
        margin: 10px;
    }

    .modal-body {
        max-height: calc(80vh - 120px);
    }

    /* Stats grid mobile */
    .stats-grid {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .stat-card {
        padding: 12px;
    }

    .stat-value {
        font-size: 22px;
    }

    .stat-label {
        font-size: 11px;
    }

    /* Dashboard mobile */
    .dashboard-content {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .quick-actions-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }

    .quick-action-card {
        padding: 12px;
    }

    /* Drop zone mobile */
    .drop-zone {
        padding: 30px 20px;
    }

    .drop-zone-icon {
        font-size: 40px;
    }

    /* Export view mobile */
    .export-type-tabs {
        flex-direction: column;
    }

    .export-type-tabs .tab-btn {
        width: 100%;
    }

    /* Projects view mobile */
    .projects-layout {
        flex-direction: column;
    }

    .projects-list-panel,
    .project-detail-panel {
        width: 100%;
    }

    /* URL Import mobile */
    .url-import-form .form-row {
        flex-direction: column;
    }

    .url-import-form .form-group {
        width: 100%;
    }

    /* Config grid mobile */
    .config-grid {
        grid-template-columns: 1fr;
    }

    /* Empty state mobile */
    .empty-state {
        padding: 30px 20px;
    }

    .empty-icon-img {
        width: 60px;
        height: 60px;
    }

    /* Alchemer section mobile */
    .api-credentials-form .form-group {
        margin-bottom: 12px;
    }
}

/* iPhone SE and smaller screens */
@media screen and (max-width: 375px) {
    .content-wrapper {
        padding: 8px;
    }

    .card-body {
        padding: 10px;
    }

    .btn {
        font-size: 12px;
        padding: 8px 12px;
    }

    .stats-grid {
        grid-template-columns: 1fr;
    }

    .quick-actions-grid {
        grid-template-columns: 1fr;
    }
}

/* Landscape mode on mobile */
@media screen and (max-width: 812px) and (orientation: landscape) {
    .sidebar.mobile-open {
        width: 200px;
    }

    .modal {
        max-height: 80vh;
    }

    .modal-body {
        max-height: 50vh;
    }
}

@supports (padding: max(0px)) {
    @media screen and (max-width: 480px) {
        .header {
            padding-top: max(8px, env(safe-area-inset-top));
        }

        .main-content {
            padding-bottom: max(70px, calc(70px + env(safe-area-inset-bottom)));
        }

        .toast-container {
            bottom: max(80px, calc(80px + env(safe-area-inset-bottom)));
        }
    }
}

/* =====================================================
   Vendor Quota Table Styles
   ===================================================== */

.vendor-quota-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
    max-width: 550px;
}

.vendor-quota-group {
    margin-bottom: 16px;
}

.vendor-quota-group-header {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
    padding: 6px 10px;
    background: var(--bg-tertiary);
    border-radius: 6px;
    display: inline-block;
}

.vendor-quota-section h5 {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-primary);
}

.vendor-quota-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
    background: var(--bg-primary);
    border-radius: var(--border-radius);
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.vendor-quota-table th,
.vendor-quota-table td {
    padding: 8px 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.vendor-quota-table th {
    background: var(--bg-tertiary);
    font-weight: 600;
    color: var(--text-secondary);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.vendor-quota-table td {
    color: var(--text-primary);
}

.vendor-quota-table tr:last-child td {
    border-bottom: none;
}

.vendor-quota-table tr:hover {
    background: var(--bg-hover);
}

.vendor-quota-table input[type="text"],
.vendor-quota-table input[type="number"] {
    width: 100%;
    padding: 4px 8px;
    border: 1px solid transparent;
    border-radius: 4px;
    background: transparent;
    font-size: 12px;
    color: var(--text-primary);
    transition: all var(--transition-fast);
}

.vendor-quota-table input[type="text"]:hover,
.vendor-quota-table input[type="number"]:hover {
    background: var(--bg-tertiary);
}

.vendor-quota-table input[type="text"]:focus,
.vendor-quota-table input[type="number"]:focus {
    outline: none;
    border-color: var(--color-primary);
    background: var(--bg-primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.vendor-quota-table input[type="number"] {
    width: 80px;
    text-align: right;
}

.vendor-quota-table .delete-row-btn {
    background: none;
    border: none;
    color: var(--color-danger);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    opacity: 0.6;
    transition: all var(--transition-fast);
}

.vendor-quota-table .delete-row-btn:hover {
    opacity: 1;
    background: rgba(239, 68, 68, 0.1);
}

.vendor-quota-actions {
    display: flex;
    gap: 8px;
    margin-top: 12px;
    flex-wrap: wrap;
}

.vendor-quota-actions .btn {
    font-size: 11px;
    padding: 6px 12px;
}

/* Vendor Quota Filter */
.vendor-quota-filter {
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.vendor-quota-filter-input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 12px;
    transition: all var(--transition-fast);
}

.vendor-quota-filter-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}

.vendor-quota-filter-input::placeholder {
    color: var(--text-tertiary);
}

.vendor-quota-filter-clear {
    padding: 6px 10px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-secondary);
    font-size: 11px;
    cursor: pointer;
    transition: all var(--transition-fast);
    white-space: nowrap;
}

.vendor-quota-filter-clear:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

.vendor-quota-filter-info {
    font-size: 11px;
    color: var(--text-tertiary);
    margin-left: 8px;
}

.vendor-quota-table tr.filtered-out {
    display: none;
}

.vendor-quota-match-count {
    font-size: 11px;
    color: var(--color-primary);
    font-weight: 500;
    padding: 4px 8px;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 4px;
}

/* Empty quota table state */

/* =====================================================
   Notification System Styles
   ===================================================== */

.notification-bell {
    position: relative;
    display: inline-block;
    z-index: 1000;
}

.notification-btn {
    position: relative;
    padding: 8px;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 1px solid transparent;
}

.notification-btn:hover {
    background: var(--bg-hover);
}

.bell-icon {
    width: 20px;
    height: 20px;
    opacity: 0.7;
}

.notification-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    background: var(--color-danger);
    color: white;
    font-size: 10px;
    font-weight: bold;
    min-width: 16px;
    height: 16px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
    border: 2px solid var(--bg-primary);
}

.notification-panel {
    position: absolute;
    top: 100%;
    right: 0;
    width: 320px;
    background: var(--bg-card);
    border-radius: var(--border-radius);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
    border: 1px solid var(--border-color);
    z-index: 9999;
    margin-top: 8px;
    display: flex;
    flex-direction: column;
    max-height: 400px;
    animation: slideInDown 0.2s ease-out;
}

.notification-header {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius) var(--border-radius) 0 0;
}

.notification-header h4 {
    font-size: 14px;
    font-weight: 600;
    margin: 0;
}

.btn-xs {
    padding: 4px 8px;
    font-size: 11px;
}

.notification-list {
    overflow-y: auto;
    max-height: 300px;
    min-height: 100px;
}

.notification-item {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    font-size: 13px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
    transition: background 0.2s;
    background: var(--bg-card);
}

.notification-item:last-child {
    border-bottom: none;
}

.notification-item:hover {
    background: var(--bg-hover);
}

.notification-item.error {
    border-left: 3px solid var(--color-danger);
}

.notification-item.warning {
    border-left: 3px solid var(--color-warning);
}

.notification-item.success {
    border-left: 3px solid var(--color-success);
}

.notification-item.info {
    border-left: 3px solid var(--color-info);
}

.notification-item.error .notification-icon {
    color: var(--color-danger);
}

.notification-item.warning .notification-icon {
    color: var(--color-warning);
}

.notification-item.success .notification-icon {
    color: var(--color-success);
}

.notification-item.info .notification-icon {
    color: var(--color-info);
}

.notification-icon {
    font-size: 18px;
    flex-shrink: 0;
}

.notification-content {
    flex: 1;
    min-width: 0;
}

.notification-message {
    margin-bottom: 4px;
    color: var(--text-primary);
    line-height: 1.4;
    word-wrap: break-word;
    font-weight: 500;
}

.notification-time {
    font-size: 11px;
    color: var(--text-tertiary);
}

.notification-empty {
    padding: 30px;
    text-align: center;
    color: var(--text-tertiary);
    font-size: 13px;
    font-style: italic;
}

/* Dark mode adjustment */
[data-theme="dark"] .bell-icon {
    filter: invert(1);
    opacity: 0.8;
}

/* =====================================================
   AUTO REPORT MODULE STYLES
   ===================================================== */

.auto-report-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: max-content max-content;
    align-items: start;
    align-content: start;
    gap: 24px;
    max-width: 1600px;
    margin-top: 0;
}

.auto-report-config-card {
    grid-column: 1;
    grid-row: 1 / 3;
}

.auto-report-preview-card {
    grid-column: 2;
    grid-row: 1;
}

.auto-report-history-card {
    grid-column: 2;
    grid-row: 2;
}

/* Report Status Badge */
.report-status {
    font-size: 12px;
    padding: 4px 12px;
    border-radius: 12px;
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    font-weight: 500;
}

.report-status.configured {
    background: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
}

/* Config Grid */
.auto-report-config-card .config-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-top: 16px;
}

.auto-report-config-card .form-group.full-width {
    grid-column: 1 / -1;
}

/* Preview Container */
.report-preview-container {
    min-height: 300px;
    max-height: 500px;
    overflow-y: auto;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    padding: 0;
}

.report-preview-content {
    padding: 0;
}

.report-preview-content .email-preview {
    background: #ffffff;
    color: #111111;
    padding: 20px;
    border-radius: var(--border-radius);
    font-size: 13px;
}

[data-theme="dark"] .report-preview-content .email-preview {
    /* Keep email preview light for accuracy */
    background: #ffffff;
    color: #111111;
}

/* Loading State */
.loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: var(--text-secondary);
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border-color);
    border-top-color: var(--color-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-bottom: 16px;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Preview Actions */
.preview-actions {
    display: flex;
    gap: 8px;
}

/* Report History List */
.report-history-list {
    max-height: 200px;
    overflow-y: auto;
}

.report-history-list .history-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.report-history-list .history-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid var(--border-color);
    font-size: 13px;
}

.report-history-list .history-item:last-child {
    border-bottom: none;
}

.report-history-list .history-date {
    color: var(--text-primary);
    font-weight: 500;
    min-width: 150px;
}

.report-history-list .history-recipients {
    flex: 1;
    color: var(--text-secondary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.report-history-list .history-status {
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 500;
}

.report-history-list .history-status.success {
    background: rgba(16, 185, 129, 0.15);
    color: var(--color-success);
}

.report-history-list .history-status.error {
    background: rgba(239, 68, 68, 0.15);
    color: var(--color-danger);
}

/* Empty State Small */
.empty-state.small {
    padding: 20px;
}

.empty-state.small .empty-icon {
    font-size: 32px;
}

/* Responsive Auto Report */
@media (max-width: 1024px) {
    .auto-report-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
    }

    .auto-report-config-card {
        grid-column: 1;
        grid-row: 1;
    }

    .auto-report-preview-card {
        grid-column: 1;
        grid-row: 2;
    }

    .auto-report-history-card {
        grid-column: 1;
        grid-row: 3;
    }
}

@media (max-width: 768px) {
    .auto-report-config-card .config-grid {
        grid-template-columns: 1fr;
    }

    .report-history-list .history-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }

    .report-history-list .history-date {
        min-width: auto;
    }
}

/* Schedule Checkboxes */
.schedule-checkboxes {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
}

.schedule-checkboxes .checkbox-label {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    transition: all var(--transition-fast);
    user-select: none;
}

.schedule-checkboxes .checkbox-label:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.schedule-checkboxes .checkbox-label:has(input:checked) {
    background: rgba(99, 102, 241, 0.1);
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.schedule-checkboxes input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: var(--color-primary);
    cursor: pointer;
}

/* =====================================================
   RECIPIENT GROUPS & SECTION VISIBILITY STYLES
   ===================================================== */

/* Recipient Groups Panel */
.recipient-groups-panel {
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    padding: 12px;
}

.recipient-groups-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 12px;
}

.recipient-group-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.recipient-group-tag:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.recipient-group-tag.active {
    background: rgba(99, 102, 241, 0.25);
    border: 2px solid var(--color-primary);
    color: var(--color-primary);
    font-weight: 700;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
}

.recipient-group-tag.selected {
    transform: scale(1.02);
}

.recipient-group-tag.in-schedule {
    background: rgba(245, 158, 11, 0.2);
    border: 2px solid var(--color-warning);
    color: var(--color-warning);
    animation: schedule-pulse 2s ease-in-out infinite;
}

.recipient-group-tag.in-schedule.active {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(245, 158, 11, 0.2) 100%);
    border: 2px solid var(--color-primary);
}

@keyframes schedule-pulse {

    0%,
    100% {
        box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4);
    }

    50% {
        box-shadow: 0 0 0 6px rgba(245, 158, 11, 0);
    }
}

.recipient-group-tag .group-count {
    background: var(--bg-secondary);
    border-radius: 10px;
    padding: 2px 6px;
    font-size: 10px;
    color: var(--text-tertiary);
}

.recipient-group-actions {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

.recipient-group-actions select {
    flex: 1;
    min-width: 180px;
}

/* Section Visibility Panel */
.section-visibility-panel {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
}

.section-visibility-panel .checkbox-label {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    transition: all var(--transition-fast);
    user-select: none;
}

.section-visibility-panel .checkbox-label:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.section-visibility-panel .checkbox-label:has(input:checked) {
    background: rgba(16, 185, 129, 0.1);
    border-color: var(--color-success);
    color: var(--color-success);
}

.section-visibility-panel input[type="checkbox"] {
    width: 14px;
    height: 14px;
    accent-color: var(--color-success);
    cursor: pointer;
}

/* Custom Quota Panel */
.custom-quota-panel {
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    padding: 12px;
}

.custom-quota-list {
    margin-bottom: 12px;
    max-height: 200px;
    overflow-y: auto;
}

.custom-quota-list .empty-hint {
    color: var(--text-tertiary);
    font-size: 12px;
    font-style: italic;
    text-align: center;
    padding: 16px;
    margin: 0;
}

.custom-quota-row {
    display: grid;
    grid-template-columns: 1fr 80px 80px auto;
    gap: 8px;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-color);
    align-items: center;
}

.custom-quota-row:last-child {
    border-bottom: none;
}

.custom-quota-row input {
    height: 32px;
    font-size: 12px;
    padding: 4px 8px;
}

.custom-quota-row .delete-quota-btn {
    background: none;
    border: none;
    color: var(--color-danger);
    cursor: pointer;
    padding: 4px 8px;
    border-radius: var(--border-radius-sm);
    opacity: 0.6;
    transition: all var(--transition-fast);
}

.custom-quota-row .delete-quota-btn:hover {
    opacity: 1;
    background: rgba(239, 68, 68, 0.1);
}

.custom-quota-actions {
    display: flex;
    gap: 8px;
}

/* Group Config Modal Styles */
.group-config-modal .group-tabs {
    display: flex;
    gap: 4px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.group-config-modal .group-tab {
    padding: 8px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    transition: all var(--transition-fast);
}

.group-config-modal .group-tab:hover {
    border-color: var(--color-primary);
}

.group-config-modal .group-tab.active {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: white;
}

.group-config-modal .group-content {
    padding: 16px 0;
}

.group-config-modal .form-group {
    margin-bottom: 16px;
}

.group-config-modal .form-group label {
    display: block;
    margin-bottom: 6px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
}

/* ===== Hide Old Batch Actions (Bottom) ===== */
.data-actions {
    display: none !important;
}

/* ===== Ensure Table Header Bar is Visible ===== */
.table-header-bar {
    display: flex !important;
}

/* =====================================================
   MOBILE RESPONSIVE STYLES
   ===================================================== */

/* Tablet and below (< 1024px) */
@media screen and (max-width: 1024px) {
    .dashboard-content {
        grid-template-columns: 1fr;
    }

    .main-header {
        padding: 0 12px;
    }

    /* Tablet specific adjustments */
    .project-manager select {
        width: 140px;
    }
}

/* Landscape Mode Adjustments */
@media screen and (max-height: 500px) and (orientation: landscape) {
    .sidebar {
        width: 220px !important;
        /* Keep it compact in landscape too */
    }

    .sidebar-nav {
        overflow-y: auto;
        /* Ensure scrollable menu in landscape */
        max-height: calc(100vh - 60px);
    }
}

/* Mobile devices (< 768px) */
@media screen and (max-width: 768px) {

    /* Hide sidebar by default on mobile */
    .sidebar {
        transform: translateX(-100%);
        z-index: 2005 !important;
        /* Highest priority */
        width: 280px !important;
        width: 220px !important;
        /* Reduced to 220px as requested */
        box-shadow: 4px 0 15px rgba(0, 0, 0, 0.3);
        background: var(--bg-sidebar) !important;
        /* Ensure solid background override */
        height: 100vh;
        top: 0;
        left: 0;
        position: relative;
        display: flex !important;
        /* Ensure flex display */
        visibility: visible;
        /* Force visibility */
        transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    .sidebar.mobile-open {
        transform: translateX(0);
    }

    /* Sidebar Header adjustments for mobile */
    .sidebar-header {
        padding: 12px 16px;
        /* Compact padding */
    }

    .sidebar-header h2 {
        font-size: 16px !important;
        /* Smaller title */
    }

    .nav-item {
        padding: 10px 16px !important;
        /* Compact nav items */
    }

    .nav-link {
        font-size: 13px !important;
        /* Smaller font for menu items */
    }

    /* Reset main content margin */
    .main-content {
        margin-left: 0 !important;
        width: 100%;
    }

    .sidebar.collapsed~.main-content {
        margin-left: 0 !important;
    }

    /* Show mobile menu button */
    .mobile-menu-btn {
        display: flex !important;
        align-items: center;
        justify-content: center;
        padding: 8px;
        margin-right: -8px;
        z-index: 1001;
        /* Ensure above header background */
        color: var(--text-primary);
        font-size: 24px;
        background: none;
        border: none;
        cursor: pointer;
        min-width: 44px;
        /* Touch target size */
        min-height: 44px;
    }

    /* Header adjustments */
    /* Header adjustments - GRID LAYOUT */
    .main-header {
        padding: 8px;
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 12px;
        align-items: center;
        height: auto;
        min-height: 56px;
        z-index: 100;
        position: relative;
    }

    .header-left {
        /* This now just wraps the menu button */
        grid-column: 1;
        width: auto;
        min-width: unset;
        flex: none;
    }

    /* Project manager moves to center */
    .project-manager {
        grid-column: 2;
        margin: 0;
        flex: 1;
        width: 100%;
        display: flex;
        justify-content: flex-start;
        /* Align left within center area */
    }

    .project-manager select {
        width: 100%;
        max-width: 100%;
        /* Fill available space */
        min-width: 0;
        /* Allow shrinking */
        padding: 8px 8px;
        font-size: 13px;
    }

    /* Header right moves to end */
    .header-right {
        grid-column: 3;
        margin: 0;
        gap: 8px;
    }

    .mobile-menu-btn {
        margin: 0;
        /* Remove negative margins */
    }

    .folder-icon {
        display: none;
    }

    /* Save indicator - compact on mobile */
    .save-indicator {
        padding: 2px 6px;
        font-size: 10px;
        white-space: nowrap;
    }

    /* Header right - compact */
    .header-right {
        gap: 4px;
        margin-left: 0;
    }

    .header-right .btn {
        padding: 6px 8px;
        font-size: 12px;
    }

    .header-right .btn span:not(.btn-icon) {
        display: none;
        /* Hide text, show icons only */
    }

    /* User avatar smaller */
    .user-avatar {
        width: 32px;
        height: 32px;
        font-size: 12px;
    }

    .user-info .user-name {
        display: none;
    }

    /* Content wrapper padding */
    .content-wrapper {
        padding: 12px;
    }

    /* Filter UI Fixes */
    /* Filter UI Fixes - COMPACT GRID */
    .filter-condition {
        display: grid;
        grid-template-columns: 1fr 1fr;
        /* Two columns for Field & Operator */
        gap: 8px;
        /* Compact gap */
        padding: 10px 34px 10px 10px;
        /* Right padding for Remove button */
        background: var(--bg-tertiary);
        border-radius: var(--border-radius);
        position: relative;
    }

    /* Target direct children by order */
    .filter-condition>select:nth-child(1) {
        grid-column: 1 / 2;
        width: 100% !important;
    }

    .filter-condition>select:nth-child(2) {
        grid-column: 2 / 3;
        width: 100% !important;
    }

    /* The value input/container (3rd child) spans full width */
    .filter-condition>*:nth-child(3) {
        grid-column: 1 / -1;
        width: 100% !important;
        margin-top: 2px;
    }

    .filter-condition select,
    .filter-condition input,
    .multi-select-trigger {
        font-size: 12px !important;
        /* Smaller text */
        height: 36px !important;
        /* Compact height */
        padding: 0 8px !important;
        min-height: unset !important;
        /* Override touch min-height if needed */
    }

    /* Compact remove button positioned absolute */
    .btn-remove {
        position: absolute;
        top: 8px;
        right: 6px;
        width: 24px;
        height: 24px;
        padding: 0 !important;
        margin: 0 !important;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: rgba(239, 68, 68, 0.1);
        color: var(--color-danger);
    }

    /* Stats grid - 2 columns on mobile */
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    /* Cards */
    .card-body {
        padding: 12px;
    }

    .card-header {
        padding: 12px;
    }

    /* Fix table responsiveness - Force Container Width */
    .data-table-container {
        margin: 0;
        width: 100%;
        max-width: 100vw;
        /* Strict limit */
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-radius: 0;
        border: none;
        display: block;
    }

    /* Ensure table doesn't force width */
    .data-table {
        min-width: 600px;
        /* Minimum width to trigger scroll */
    }

    .pagination-controls {
        flex-direction: column;
        gap: 12px;
        align-items: center;
    }
}

/* Small mobile (< 480px - iPhone SE, etc) */
@media screen and (max-width: 480px) {

    /* Optimization for very small screens */
    .project-manager select {
        max-width: 140px;
    }

    .stats-grid {
        grid-template-columns: 1fr;
    }

    /* Quick actions grid */
    .quick-actions-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Mobile overlay when sidebar is open */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1500;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition);
}

.sidebar.mobile-open+.sidebar-overlay {
    opacity: 1;
    visibility: visible;
}

/* Touch-friendly button sizes */
@media (hover: none) and (pointer: coarse) {

    .btn,
    button,
    select,
    input {
        min-height: 44px;
        /* Apple Human Interface Guidelines */
    }

    .nav-item {
        padding: 14px 16px;
    }
}

/* =====================================================
   USER DROPDOWN STYLES
   ===================================================== */
.user-menu-container {
    position: relative;
    display: flex;
    align-items: center;
}

.user-avatar-btn {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    border-radius: 50%;
    transition: transform 0.2s;
}

.user-avatar-btn:active {
    transform: scale(0.95);
}

.user-avatar-icon {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 14px;
    box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
}

.user-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 8px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    min-width: 200px;
    z-index: 1000;
    display: none;
    overflow: hidden;
    transform-origin: top right;
    animation: dropdownPop 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.user-dropdown.show {
    display: block;
}

.user-dropdown-header {
    padding: 16px;
    border-bottom: 1px solid var(--border-color);
    background: var(--bg-secondary);
}

.user-email-display {
    display: block;
    font-weight: 500;
    color: var(--text-primary);
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-dropdown-item {
    width: 100%;
    padding: 12px 16px;
    border: none;
    background: none;
    text-align: left;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--text-primary);
    font-size: 14px;
    transition: background 0.2s;
}

.user-dropdown-item:hover {
    background: var(--bg-highlight);
    color: #ef4444;
    /* Red for logout */
}

.user-dropdown-item.logout-btn {
    color: #ef4444;
}

@keyframes dropdownPop {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* =====================================================
   RESPONSIVE QUOTA PANEL STYLES
   ===================================================== */
.project-panels-wrapper {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}

.project-panel-left {
    flex: 0 0 350px;
    /* Fixed width for info column on desktop */
}

.project-panel-right {
    flex: 1;
    /* Take remaining space */
}

/* Tablet adjustments */
@media screen and (max-width: 1024px) {
    .project-panel-left {
        flex: 0 0 300px;
    }
}

/* Mobile adjustments */
@media screen and (max-width: 768px) {
    .project-panels-wrapper {
        flex-direction: column;
        gap: 15px;
    }

    .project-panel-left,
    .project-panel-right {
        flex: none;
        width: 100%;
    }

    /* Adjust quota summary mini for mobile */
    .quota-summary-mini {
        padding: 12px;
    }

    .quota-headline {
        font-size: 14px;
    }

    /* Make buttons touch-friendly */
    .project-info-panel-toggle {
        padding: 8px;
        min-width: 32px;
    }
}

/* ===== Multi-Schedule Tab Styles ===== */
.auto-report-tabs {
    display: flex;
    gap: 4px;
    padding: 12px 20px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}

.auto-report-tab-btn {
    flex: 1;
    max-width: 200px;
    padding: 10px 16px;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-sm);
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.auto-report-tab-btn:hover {
    color: var(--text-primary);
    background: var(--bg-tertiary);
}

.auto-report-tab-btn.active {
    background: var(--color-primary);
    color: white;
    box-shadow: var(--shadow-sm);
}

.tab-status-badge {
    margin-left: 6px;
    animation: pulse-green 2s ease-in-out infinite;
}

@keyframes pulse-green {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }
}

.auto-report-tab-btn .tab-status-badge {
    font-size: 10px;
}

/* Multi-Schedule Panel */
.multi-schedule-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    flex-wrap: wrap;
    gap: 12px;
}

.multi-schedule-header h4 {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.multi-schedule-actions {
    display: flex;
    gap: 8px;
}

.multi-schedule-info {
    padding: 10px 14px;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-left: 4px solid #3b82f6;
    border-radius: var(--border-radius-sm);
    margin-bottom: 16px;
}

.multi-schedule-info small {
    color: #1e40af;
    font-size: 13px;
}

.multi-schedule-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.multi-schedule-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    text-align: center;
    color: var(--text-tertiary);
}

.multi-schedule-empty .empty-icon {
    font-size: 48px;
    margin-bottom: 12px;
}

.multi-schedule-empty p {
    margin-bottom: 16px;
}

/* Schedule Instance Card */
.schedule-instance-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    overflow: hidden;
    transition: all var(--transition-fast);
}

.schedule-instance-card:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow);
}

.schedule-instance-card.disabled {
    opacity: 0.6;
    background: var(--bg-tertiary);
}

.schedule-instance-card {
    cursor: pointer;
}

.schedule-instance-card.selected {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3);
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
}

[data-theme="dark"] .schedule-instance-card.selected {
    background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
}

/* Multi Schedule List Items - Updated Time Badges */
.schedule-times-container {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-right: 10px;
}

.schedule-time-badge {
    background: #eef2ff;
    color: #4f46e5;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
    border: 1px solid #c7d2fe;
    display: inline-flex;
    align-items: center;
}

.schedule-card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-bottom: 1px solid var(--border-color);
}

[data-theme="dark"] .schedule-card-header {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
}

.schedule-toggle-btn {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    border: 2px solid var(--border-color);
    background: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: var(--text-tertiary);
    transition: all var(--transition-fast);
}

.schedule-toggle-btn:hover {
    border-color: var(--color-primary);
}

.schedule-toggle-btn.active {
    background: var(--color-success);
    border-color: var(--color-success);
    color: white;
}

.schedule-time {
    font-size: 14px;
    font-weight: 600;
    color: var(--color-primary);
    padding: 4px 10px;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 16px;
    white-space: nowrap;
}

.schedule-name {
    flex: 1;
    font-size: 15px;
    font-weight: 500;
    color: var(--text-primary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.schedule-actions {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
}

.schedule-actions .btn {
    padding: 6px 10px;
    font-size: 12px;
}

.btn-danger-text {
    color: var(--color-danger) !important;
}

.btn-danger-text:hover {
    background: rgba(239, 68, 68, 0.1) !important;
}

.schedule-card-details {
    display: flex;
    gap: 16px;
    padding: 12px 16px;
    font-size: 13px;
    color: var(--text-secondary);
    flex-wrap: wrap;
}

.schedule-card-details .detail-item {
    display: flex;
    align-items: center;
    gap: 4px;
}

.schedule-card-details .warning {
    color: var(--color-warning);
    font-weight: 500;
}

/* Schedule Edit Modal Form */
.schedule-edit-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.schedule-edit-form .form-group {
    margin-bottom: 0;
}

.schedule-edit-form label {
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
    color: var(--text-primary);
}

.time-options-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 8px;
}

.time-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: 13px;
}

.time-option:hover {
    background: var(--bg-hover);
}

.time-option input:checked+span {
    color: var(--color-primary);
    font-weight: 600;
}

.group-options-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.group-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.group-option:hover {
    background: var(--bg-hover);
}

.group-option input:checked+span {
    color: var(--color-success);
    font-weight: 500;
}

.section-options-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 8px;
}

.section-option {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    font-size: 13px;
}

.section-option input:checked+span {
    color: var(--color-primary);
    font-weight: 500;
}

/* ===== Active Schedules Dashboard Card ===== */
.active-schedules-card {
    margin-top: 20px;
}

.active-schedules-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 10px;
    max-height: 280px;
    overflow-y: auto;
}

.active-schedule-item {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: 10px;
    text-align: center;
}

.active-schedule-item.basic-schedule {
    border-left: 3px solid var(--color-info);
}

.active-schedule-item.multi-schedule {
    border-left: 3px solid var(--color-warning);
}

.schedule-type-badge {
    font-size: 8px;
    padding: 1px 5px;
    border-radius: 6px;
    font-weight: 600;
    margin-left: 4px;
}

.schedule-type-badge.basic {
    background: rgba(59, 130, 246, 0.2);
    color: var(--color-info);
}

.schedule-type-badge.multi {
    background: rgba(245, 158, 11, 0.2);
    color: var(--color-warning);
}

.schedule-project-name {
    font-size: 11px;
    font-weight: 700;
    color: var(--color-primary);
    margin-bottom: 6px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.schedule-times {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    justify-content: center;
    margin-bottom: 6px;
}

.schedule-time-badge {
    background: var(--color-success);
    color: white;
    padding: 2px 6px;
    border-radius: 8px;
    font-size: 9px;
    font-weight: 600;
}

.schedule-timing {
    font-size: 9px;
    color: var(--text-tertiary);
    margin-bottom: 6px;
}

.schedule-emails {
    background: var(--bg-secondary);
    border-radius: var(--border-radius-sm);
    padding: 6px 8px;
}

.schedule-emails-label {
    font-size: 9px;
    color: var(--text-tertiary);
    margin-bottom: 4px;
}

.schedule-emails-list {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.schedule-email-tag {
    background: var(--bg-tertiary);
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 11px;
    color: var(--text-secondary);
}

.schedule-email-tag.highlighted {
    background: rgba(99, 102, 241, 0.2);
    color: var(--color-primary);
    font-weight: 600;
    border: 1px solid var(--color-primary);
}

.no-active-schedules {
    text-align: center;
    padding: 24px;
    color: var(--text-tertiary);
    font-size: 14px;
}

.schedule-instance-count {
    background: var(--color-warning);
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 11px;
    font-weight: 600;
}

/* ===== Config Summary Card (Premium Dark Blue & Table Layout) ===== */
.config-summary-card {
    background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-shadow: 0 4px 15px rgba(30, 58, 138, 0.2);
    color: white;
    /* Cat decoration support */
    position: relative;
    overflow: visible;
    margin-top: 40px;
}

[data-theme="dark"] .config-summary-card {
    background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%);
    border-color: rgba(255, 255, 255, 0.05);
}

.summary-cat-decoration {
    position: absolute;
    top: -65px;
    right: 24px;
    width: 60px;
    height: auto;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
    z-index: 10;
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    cursor: grab;
}

.summary-cat-decoration:hover {
    transform: translateY(-10px) rotate(10deg) scale(1.1);
}

.summary-cat-decoration:active {
    cursor: grabbing;
    transform: translateY(0) rotate(0) scale(0.95);
}

.summary-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    padding-bottom: 8px;
    margin-bottom: 4px;
}

.summary-title {
    font-weight: 600;
    font-size: 13px;
    color: rgba(255, 255, 255, 0.95);
    display: flex;
    align-items: center;
    gap: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

[data-theme="dark"] .summary-title {
    color: white;
}

.summary-status {
    font-size: 10px;
    color: #a5f3fc;
    font-weight: 600;
    padding: 2px 10px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    letter-spacing: 0.5px;
}

.summary-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 100%;
}

.summary-item {
    display: grid;
    grid-template-columns: 24px 80px 1fr;
    align-items: center;
    font-size: 13px;
    padding: 4px 0;
    border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
    background: none;
    border-radius: 0;
    box-shadow: none;
}

.summary-item:last-child {
    border-bottom: none;
}

.summary-icon {
    font-size: 14px;
    opacity: 0.9;
    color: rgba(255, 255, 255, 0.9);
}

.summary-label {
    display: block;
    color: rgba(255, 255, 255, 0.7);
    font-size: 12px;
    font-weight: 500;
}

.summary-value {
    color: white;
    font-weight: 600;
    font-family: 'SF Mono', 'Fira Code', 'JetBrains Mono', Consolas, monospace;
    font-size: 12px;
}

.summary-tooltip {
    cursor: help;
    border-bottom: 1px dotted rgba(255, 255, 255, 0.5);
}

/* Responsive - stack on small screens */
@media screen and (max-width: 600px) {
    .config-summary-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .summary-content {
        width: 100%;
    }
}

/* --- High need quota highlighting --- */
.vendor-quota-table tr.quota-high-need td {
    background-color: #fffde7 !important;
    /* Light amber/yellow */
}

.vendor-quota-table tr.quota-high-need td:first-child {
    border-left: 3px solid #fbc02d;
    /* Darker yellow accent */
}

.highlight-toggle {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
    padding: 0;
    opacity: 0.4;
    transition: opacity 0.2s;
}

.highlight-toggle:hover {
    opacity: 0.8;
}

.highlight-toggle.active {
    opacity: 1;
}

/* --- Filter Summary Box --- */
.filter-summary-box {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
}

.filter-summary-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    font-size: 13px;
    color: #6c757d;
}

.filter-summary-stats {
    display: flex;
    gap: 16px;
    font-size: 14px;
    font-weight: 500;
}

.filter-summary-count {
    color: var(--primary-color, #6366f1);
}

.filter-summary-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.filter-tag {
    background: #e3f2fd;
    color: #1976d2;
    padding: 2px 10px;
    border-radius: 20px;
    font-size: 12px;
    border: 1px solid #bbdefb;
}

/* --- Criteria Display --- */
.criteria-card {
    background: var(--bg-primary, #fff);
    border: 1px solid var(--border-color, #e0e0e0);
    border-radius: 8px;
    padding: 12px 16px;
    margin: 10px 0;
    font-size: 13.5px;
    line-height: 1.6;
    color: var(--text-primary, #333);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.criteria-label {
    font-weight: 600;
    color: var(--text-secondary, #555);
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

    /* FW Tools Demo - Ultimate Layout Fix */
    body { 
        margin: 0 !important; 
        padding: 0 !important; 
        overflow: hidden !important; 
    }
    .app-container { 
        display: flex !important; 
        flex-direction: row !important; 
        flex-wrap: nowrap !important;
        align-items: stretch !important; 
        width: 100vw !important;
        height: 100vh !important;
        overflow: hidden !important;
        background: #0f172a !important; /* Force dark background */
    }
    .sidebar { 
        position: relative !important;
        flex: 0 0 var(--sidebar-width) !important;
        width: var(--sidebar-width) !important;
        height: 100vh !important;
        z-index: 1000 !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        background: #1e293b !important;
        border-right: 1px solid rgba(255,255,255,0.1) !important;
        transition: width 0.3s ease !important;
    }
    .sidebar.collapsed {
        flex: 0 0 var(--sidebar-collapsed-width) !important;
        width: var(--sidebar-collapsed-width) !important;
    }
    .main-content { 
        flex: 1 !important; 
        min-width: 0 !important; 
        height: 100vh !important;
        overflow-y: auto !important;
        display: flex !important;
        flex-direction: column !important;
        background: #0f172a !important;
    }
    .main-header { 
        flex: 0 0 auto !important; 
        position: sticky !important;
        top: 0 !important;
        z-index: 900 !important;
        background: rgba(15, 23, 42, 0.9) !important;
        backdrop-filter: blur(8px) !important;
        border-bottom: 1px solid rgba(255,255,255,0.1) !important;
    }
    .content-wrapper { 
        flex: 1 1 auto !important; 
        padding: 24px !important;
    }
    
    /* CRITICAL FIX: Hide inactive views to prevent vertical gap */
    .view { 
        display: none !important; 
        visibility: visible !important;
        opacity: 1 !important;
        height: auto !important;
    }
    .view.active { 
        display: block !important; 
    }

    /* Fix menu text alignment in sidebar */
    .nav-item {
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        padding: 12px 20px !important;
        text-decoration: none !important;
        color: #94a3b8 !important;
        white-space: nowrap !important;
    }
    .nav-item.active {
        background: rgba(99, 102, 241, 0.1) !important;
        color: #818cf8 !important;
        border-right: 2px solid #6366f1 !important;
    }
    .nav-text { display: inline-block !important; }
    .sidebar.collapsed .nav-text { display: none !important; }

    @media screen and (max-width: 768px) {
        .app-container { display: block !important; }
        .sidebar { position: fixed !important; transform: translateX(-100%) !important; width: 260px !important; }
        .sidebar.mobile-open { transform: translateX(0) !important; }
        .main-content { height: auto !important; overflow: visible !important; }
    }
    
</style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- ‚ïê‚ïê‚ïê STRUCTURED DATA FOR COPYRIGHT ‚ïê‚ïê‚ïê -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "FW Tools - Data Collection Pro",
        "author": {
            "@type": "Person",
            "name": "Ph·∫°m ƒê√¥ng ƒêi·ªÅn",
            "email": "phamdongdien19@gmail.com"
        },
        "copyrightYear": "2025",
        "copyrightHolder": {
            "@type": "Person", 
            "name": "Ph·∫°m ƒê√¥ng ƒêi·ªÅn"
        },
        "license": "MIT",
        "dateCreated": "2024-01-01",
        "identifier": "PDD-FWTOOLS-2024-AUTHENTIC"
    }
    </script>
</head>

<body>
    <!-- ‚ïê‚ïê‚ïê HIDDEN COPYRIGHT WATERMARK ‚ïê‚ïê‚ïê -->
    <div id="__copyright__"
        style="display:none !important; visibility:hidden !important; position:absolute; left:-9999px;"
        data-author="Ph·∫°m ƒê√¥ng ƒêi·ªÅn" data-email="phamdongdien19@gmail.com"
        data-copyright="¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn. All Rights Reserved." data-signature="PDD-FWTOOLS-2024-AUTHENTIC"
        data-warning="Unauthorized use of this software is prohibited and may result in legal action.">
        ¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn | phamdongdien19@gmail.com | All Rights Reserved
    </div>

    <!-- Auth Loading Overlay (Security: Fail Closed) -->
    <!-- Auth Loading Overlay (Security: Fail Closed) -->
    

    <style>
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>

    <div class="app-container" id="appContainer" style="display: flex;">
        <!-- Mobile Overlay -->
        <div class="mobile-overlay" id="mobileOverlay"></div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="assets/icons/logo.png" alt="FW Tools" class="logo-icon-img">
                    <span class="logo-text">FW Tools</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <span></span>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-view="dashboard">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text" data-i18n="nav.dashboard">Dashboard</span>
                </a>
                <a href="#import" class="nav-item" data-view="import">
                    <span class="nav-icon">üì•</span>
                    <span class="nav-text" data-i18n="nav.import">Import Data</span>
                </a>
                <a href="#urlImport" class="nav-item" data-view="urlImport">
                    <span class="nav-icon">üåê</span>
                    <span class="nav-text" data-i18n="nav.urlImport">URL Import</span>
                </a>
                <a href="#projects" class="nav-item" data-view="projects">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text" data-i18n="nav.projects">Projects</span>
                </a>
                <a href="#data" class="nav-item" data-view="data">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text" data-i18n="nav.filterBatch">Filter & Batch</span>
                </a>
                <a href="#export" class="nav-item" data-view="export">
                    <span class="nav-icon">üì§</span>
                    <span class="nav-text" data-i18n="nav.export">Export</span>
                </a>
                <a href="#config" class="nav-item" data-view="config">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text" data-i18n="nav.config">Config</span>
                </a>
                <a href="#autoReport" class="nav-item" data-view="autoReport">
                    <span class="nav-icon">üìß</span>
                    <span class="nav-text" data-i18n="nav.autoReport">Auto Report</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                
                
                <span class="version">v1.0.0</span>
                <div class="sidebar-copyright"
                    style="font-size: 10px; color: #6b7280; margin-top: 5px; text-align: center;">¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="project-manager">
                        <select id="projectSelect" class="form-control form-control-sm"
                            onchange="handleProjectSelect(this.value); updateProjectStarButton(); if(typeof updateCurrentProjectIndicator==='function') updateCurrentProjectIndicator(this.value);">
                            <option value="260106">260106 - home</option>
                        </select>
                        <button class="star-toggle" id="projectStarBtn" style="display: none;"
                            onclick="toggleStarProject(document.getElementById('projectSelect').selectedOptions[0]?.text)"
                            data-i18n-title="header.starProject">‚òÜ</button>

                        <div class="header-sms-preview" id="headerSmsPreview" data-i18n-title="header.smsContent">
                            <span data-i18n="header.smsContent">SMS Content: </span>
                            <strong id="headerSmsText" style="color: #6366f1;">IFM co KS 5phut ve tieu dung, thuong</strong>
                        </div>
                        <button class="btn btn-sm btn-primary" onclick="saveCurrentProject()" title="Save Project"
                            data-i18n="header.save">üíæ
                            Save</button>
                        <button class="btn btn-sm btn-secondary" onclick="createNewProject()" title="New Project"
                            data-i18n="header.new">+
                            New</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteCurrentProject()" title="Delete Project"
                            id="deleteProjectBtn" style="display: none;" data-i18n="header.delete">üóëÔ∏è</button>
                        <span class="save-indicator" id="saveIndicator">‚úì Saved</span>
                    </div>

                    <!-- User Info & Logout -->
                    <!-- User Info & Logout Dropdown -->
                    <div class="user-menu-container">
                        <button class="user-avatar-btn" onclick="toggleUserDropdown()" id="userAvatarBtn"
                            title="User Menu">
                            <div class="user-avatar-icon" id="userAvatarIcon" style="background:#6366f1; display:flex; align-items:center; justify-content:center;">ƒê</div>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-dropdown-header">
                                <span class="user-email-display" id="userEmail">...</span>
                            </div>
                            <button class="user-dropdown-item logout-btn" onclick="handleLogout()">
                                <span class="dropdown-icon">üö™</span>
                                Logout
                            </button>
                        </div>
                    </div>

                    <div class="notification-bell" id="notificationBell">
                        <button class="btn btn-icon notification-btn"
                            onclick="event.stopPropagation(); toggleNotificationPanel();" title="Notifications">
                            <img src="assets/icons/bell.png" alt="Notifications" class="bell-icon">
                            <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                        </button>
                        <div class="notification-panel" id="notificationPanel" style="display: none;">
                            <div class="notification-header">
                                <span data-i18n="header.notifications">Th√¥ng b√°o</span>
                                <button class="btn btn-xs btn-outline" onclick="clearNotifications()"
                                    data-i18n="header.clear">Clear</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <div class="notification-empty">Kh√¥ng c√≥ th√¥ng b√°o m·ªõi</div>
                            </div>
                        </div>
                    </div>
                    <div class="file-info" id="fileInfo">
                        <span class="file-name">No file loaded</span>
                    </div>
                </div>
            </header>

            <!-- Content Views -->
            <div class="content-wrapper">
                <!-- Dashboard View -->
                <section class="view active" id="dashboardView">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon total">üìä</div>
                            <div class="stat-info">
                                <span class="stat-value" id="totalRows">4,031</span>
                                <span class="stat-label" data-i18n="dashboard.totalRows">Total Rows</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon sms">üì±</div>
                            <div class="stat-info">
                                <span class="stat-value" id="smsMarked">1,240</span>
                                <span class="stat-label" data-i18n="dashboard.smsMarked">SMS Marked</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon email">üìß</div>
                            <div class="stat-info">
                                <span class="stat-value" id="emailMarked">315</span>
                                <span class="stat-label" data-i18n="dashboard.emailMarked">Email Marked</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon pending">‚è≥</div>
                            <div class="stat-info">
                                <span class="stat-value" id="pendingRows">0</span>
                                <span class="stat-label" data-i18n="dashboard.pending">Pending</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-content">
                        <div class="card batch-history-card">
                            <div class="card-header">
                                <h3>üìà Batch History</h3>
                            </div>
                            <div class="card-body">
                                <div class="batch-chart" id="batchChart">
                                    <div class="empty-state">
                                        <span class="empty-icon">üìä</span>
                                        <p>Import data ƒë·ªÉ xem th·ªëng k√™ batch</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card recent-actions-card">
                            <div class="card-header">
                                <h3>üìã Recent Actions</h3>
                            </div>
                            <div class="card-body">
                                <ul class="action-list" id="actionList">
                                    <li>‚úÖ Export_20250217.xlsx <span style="opacity:0.5; font-size:10px;">- 5m ago</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <h3>‚ö° Quick Actions</h3>
                        <div class="quick-actions-grid">
                            <button class="quick-action-btn" onclick="switchView('import')">
                                <span class="qa-icon">üì•</span>
                                <span>Import File</span>
                            </button>
                            <button class="quick-action-btn" onclick="markBatch('sms', 500)" id="quickMarkSms" disabled>
                                <span class="qa-icon">üì±</span>
                                <span>Mark SMS 500</span>
                            </button>
                            <button class="quick-action-btn" onclick="markBatch('email', 500)" id="quickMarkEmail"
                                disabled>
                                <span class="qa-icon">üìß</span>
                                <span>Mark Email 500</span>
                            </button>
                            <button class="quick-action-btn" onclick="exportLatestBatch()" id="quickExport" disabled>
                                <span class="qa-icon">üì§</span>
                                <span>Export Latest</span>
                            </button>
                        </div>
                    </div>

                    <!-- Starred Projects Card -->
                    <div class="card starred-projects-card">
                        <div class="card-header">
                            <h3><img src="assets/icons/star.png" alt="" class="header-icon"> D·ª± √°n y√™u th√≠ch</h3>
                            <img src="assets/icons/drink.png" alt="Relax" class="relax-icon" title="Have a break!">
                        </div>
                        <div class="card-body">
                            <div class="starred-projects-list" id="starredProjectsList">
                                <p class="no-starred">Ch∆∞a c√≥ d·ª± √°n n√†o ƒë∆∞·ª£c g·∫Øn sao. Click ‚≠ê b√™n c·∫°nh t√™n d·ª± √°n ƒë·ªÉ
                                    th√™m.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Active Schedules Card (NEW) -->
                    <div class="card active-schedules-card">
                        <div class="card-header">
                            <h3>üìß L·ªãch g·ª≠i b√°o c√°o ƒëang ho·∫°t ƒë·ªông</h3>
                            <button class="btn btn-xs btn-outline" onclick="refreshActiveSchedules()"
                                title="Refresh">üîÑ</button>
                        </div>
                        <div class="card-body">
                            <div class="active-schedules-list" id="activeSchedulesList">
                                <div class="empty-state">
                                    <span class="empty-icon">üìÖ</span>
                                    <p>ƒêang t·∫£i...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Import View -->
                <section class="view" id="importView">
                    <div class="import-container">
                        <!-- Import Type Tabs -->
                        <div class="import-type-tabs">
                            <button class="tab-btn active" data-import-type="file" onclick="switchImportTab('file')">üìÅ
                                Import File</button>
                            <button class="tab-btn" data-import-type="url" onclick="switchImportTab('url')">üåê Import
                                URL</button>
                            <button class="tab-btn" data-import-type="api" onclick="switchImportTab('api')">üîó Alchemer
                                API</button>
                        </div>

                        <!-- File Import Panel -->
                        <div class="import-panel" id="fileImportPanel">
                            <div class="drop-zone" id="dropZone">
                                <div class="drop-zone-content">
                                    <span class="drop-icon">üìÅ</span>
                                    <h3>K√©o th·∫£ file v√†o ƒë√¢y</h3>
                                    <p>H·ªó tr·ª£ CSV, Excel (.xlsx, .xls)</p>
                                    <div class="drop-divider">
                                        <span>ho·∫∑c</span>
                                    </div>
                                    <div class="file-input-wrapper">
                                        <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" hidden>
                                        <button class="btn btn-primary"
                                            onclick="document.getElementById('fileInput').click()">Ch·ªçn File</button>
                                    </div>
                                </div>
                            </div>

                            <div class="import-options card" id="importOptions" style="display: none;">
                                <div class="card-header">
                                    <h3>‚öôÔ∏è Import Options</h3>
                                </div>
                                <div class="card-body">
                                    <div class="form-group">
                                        <label>Sheet (cho file Excel):</label>
                                        <select id="sheetSelect" class="form-control">
                                            <option value="0">Sheet 1</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Header row:</label>
                                        <input type="number" id="headerRow" class="form-control" value="1" min="1">
                                    </div>
                                    <div class="form-group checkbox-group">
                                        <label>
                                            <input type="checkbox" id="autoDetectColumns" checked>
                                            T·ª± ƒë·ªông detect column mapping
                                        </label>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-secondary" onclick="cancelImport()">H·ªßy</button>
                                    <button class="btn btn-primary" onclick="confirmImport()">Import</button>
                                </div>
                            </div>

                            <div class="import-preview card" id="importPreview" style="display: none;">
                                <div class="card-header">
                                    <h3>üëÅÔ∏è Preview</h3>
                                    <span class="preview-count" id="previewCount"></span>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="data-table" id="previewTable">
                                            <thead></thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- URL Import Panel -->
                        <div class="import-panel" id="urlImportPanel" style="display: none;">
                            <div class="card">
                                <div class="card-header">
                                    <h3>üåê Import t·ª´ URL</h3>
                                </div>
                                <div class="card-body">
                                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                                        Nh·∫≠p URL c·ªßa file CSV ho·∫∑c Excel ƒë·ªÉ import tr·ª±c ti·∫øp.
                                    </p>
                                    <div class="form-group">
                                        <label>URL:</label>
                                        <input type="url" id="importUrl" class="form-control"
                                            placeholder="https://example.com/data.csv">
                                    </div>
                                    <div class="url-import-progress" id="urlImportProgress" style="display: none;">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="urlProgressFill" style="width: 0%"></div>
                                        </div>
                                        <span class="progress-text" id="urlProgressText">ƒêang t·∫£i...</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-primary" onclick="importFromUrl()">
                                        üì• Import t·ª´ URL
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Alchemer API Panel -->
                        <div class="import-panel" id="apiImportPanel" style="display: none;">
                            <!-- API Credentials Card -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>üîë API Credentials</h3>
                                    <span class="api-status" id="apiStatus">Not configured</span>
                                </div>
                                <div class="card-body">
                                    <div class="config-grid">
                                        <div class="form-group">
                                            <label>API Token:</label>
                                            <input type="text" id="apiToken" class="form-control"
                                                placeholder="Your Alchemer API Token">
                                        </div>
                                        <div class="form-group">
                                            <label>API Secret:</label>
                                            <input type="password" id="apiSecret" class="form-control"
                                                placeholder="Your API Secret">
                                        </div>
                                        <div class="form-group">
                                            <label>Survey ID:</label>
                                            <input type="text" id="apiSurveyId" class="form-control"
                                                placeholder="Survey ID to fetch">
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-secondary" onclick="testApiConnection()">üîç Test
                                        Connection</button>
                                    <button class="btn btn-primary" onclick="saveApiCredentials()">üíæ Save
                                        Credentials</button>
                                </div>
                            </div>

                            <!-- Update Status Card -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>üîÑ Update Response Status</h3>
                                </div>
                                <div class="card-body">
                                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                                        L·∫•y status (Complete/Partial/Disqualified) t·ª´ Alchemer v√† c·∫≠p nh·∫≠t v√†o data ƒë√£
                                        import.
                                    </p>
                                    <div class="config-grid">
                                        <div class="form-group">
                                            <label>PLID Column (trong data hi·ªán t·∫°i):</label>
                                            <select id="plidColumnSelect" class="form-control">
                                                <option value="">-- Ch·ªçn c·ªôt ch·ª©a PLID --</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label>Status Column (s·∫Ω t·∫°o m·ªõi n·∫øu ch∆∞a c√≥):</label>
                                            <input type="text" id="statusColumnName" class="form-control"
                                                value="Response_Status" placeholder="Response_Status">
                                        </div>
                                    </div>
                                    <div class="api-progress" id="apiProgress" style="display: none;">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="apiProgressFill" style="width: 0%"></div>
                                        </div>
                                        <span class="progress-text" id="apiProgressText">0%</span>
                                    </div>
                                    <div class="api-result" id="apiResult" style="display: none; margin-top: 16px;">
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-primary" onclick="fetchAndUpdateStatus()"
                                        id="fetchStatusBtn">
                                        üîÑ Fetch & Update Status
                                    </button>
                                </div>
                            </div>

                            <!-- Fetch Full Data Card -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>üì• Fetch Full Survey Data</h3>
                                </div>
                                <div class="card-body">
                                    <p style="color: var(--text-secondary); margin-bottom: 16px;">
                                        T·∫£i to√†n b·ªô responses t·ª´ survey v√† thay th·∫ø data hi·ªán t·∫°i.
                                    </p>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-secondary" onclick="fetchFullSurveyData()">
                                        üì• Fetch All Responses
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- URL Import View -->
                <section class="view" id="urlImportView">
                    <div class="url-import-container">
                        <!-- Import Form Card -->
                        <div class="card url-import-card">
                            <div class="card-header">
                                <h3>üåê Import t·ª´ URL</h3>
                            </div>
                            <div class="card-body">
                                <div class="url-import-form">
                                    <div class="form-row">
                                        <div class="form-group flex-2">
                                            <label>URL file CSV/Excel:</label>
                                            <input type="url" id="urlModuleInput" class="form-control"
                                                placeholder="https://example.com/data.csv">
                                        </div>
                                        <div class="form-group flex-1">
                                            <label>T√™n d·ª± √°n:</label>
                                            <input type="text" id="urlProjectName" class="form-control"
                                                placeholder="T√™n d·ª± √°n...">
                                        </div>
                                        <div class="form-group flex-0">
                                            <label>&nbsp;</label>
                                            <button class="btn btn-primary" onclick="importUrlModule()">
                                                üì• Import
                                            </button>
                                        </div>
                                    </div>
                                    <div class="url-import-progress" id="urlModuleProgress" style="display: none;">
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="urlModuleProgressFill" style="width: 0%">
                                            </div>
                                        </div>
                                        <span class="progress-text" id="urlModuleProgressText">ƒêang t·∫£i...</span>
                                    </div>
                                </div>
                                <div class="url-history-section">
                                    <div class="url-history-header">
                                        <label>üìú L·ªãch s·ª≠ import:</label>
                                        <div class="url-history-actions">
                                            <button class="btn btn-xs btn-outline" onclick="toggleUrlHistoryPanel()">
                                                <span id="urlHistoryToggleIcon">‚ñº</span>
                                            </button>
                                            <button class="btn btn-xs btn-outline" onclick="clearAllUrlHistory()"
                                                title="X√≥a t·∫•t c·∫£">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="url-history-list" id="urlHistoryList" style="display: none;">
                                        <!-- History items will be rendered here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- URL Data Table -->
                        <div class="card url-data-card" id="urlDataCard" style="display: none;">
                            <div class="card-header">
                                <h3 id="urlDataTitle">üìä D·ªØ li·ªáu</h3>
                                <div class="url-toolbar">
                                    <!-- Filter -->
                                    <div class="url-filter-group">
                                        <select id="urlFilterColumn" class="form-control form-control-sm"
                                            onchange="updateUrlFilterValues()">
                                            <option value="">-- L·ªçc theo c·ªôt --</option>
                                        </select>
                                        <div class="url-filter-dropdown">
                                            <button class="btn btn-sm btn-outline" id="urlFilterValBtn"
                                                onclick="toggleUrlFilterPanel()">
                                                Ch·ªçn gi√° tr·ªã ‚ñº
                                            </button>
                                            <div class="url-filter-panel" id="urlFilterPanel" style="display: none;">
                                                <div class="panel-header">
                                                    <span>L·ªçc theo gi√° tr·ªã</span>
                                                    <button class="btn btn-xs btn-outline"
                                                        onclick="toggleUrlFilterAll(true)">All</button>
                                                    <button class="btn btn-xs btn-outline"
                                                        onclick="toggleUrlFilterAll(false)">None</button>
                                                </div>
                                                <div class="filter-values-list" id="urlFilterValuesList"></div>
                                                <div class="panel-footer">
                                                    <button class="btn btn-sm btn-primary"
                                                        onclick="applyUrlMultiFilter()">√Åp d·ª•ng</button>
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn btn-xs btn-outline" onclick="clearUrlFilter()">‚úï</button>
                                    </div>
                                    <!-- Column Visibility -->
                                    <div class="url-visibility-dropdown">
                                        <button class="btn btn-sm btn-outline" id="urlColVisBtn"
                                            onclick="toggleUrlColumnPanel()">
                                            üëÅÔ∏è C·ªôt
                                        </button>
                                        <div class="url-visibility-panel" id="urlColVisPanel" style="display: none;">
                                            <div class="panel-header">
                                                <span>Hi·ªÉn th·ªã c·ªôt</span>
                                                <button class="btn btn-xs btn-outline"
                                                    onclick="toggleUrlAllColumns(true)">All</button>
                                                <button class="btn btn-xs btn-outline"
                                                    onclick="toggleUrlAllColumns(false)">None</button>
                                            </div>
                                            <div class="column-list" id="urlColumnList"></div>
                                        </div>
                                    </div>
                                    <span class="url-data-info" id="urlDataInfo"></span>
                                </div>
                            </div>
                            <div class="card-body url-table-body">
                                <div class="data-table-container url-table-compact">
                                    <table class="data-table url-table" id="urlDataTable">
                                        <thead id="urlDataTableHead"></thead>
                                        <tbody id="urlDataTableBody"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="url-pagination-controls">
                                    <div class="pagination-left">
                                        <div class="pagination-buttons">
                                            <button class="btn btn-sm btn-outline"
                                                onclick="goToUrlPage('first')">‚èÆÔ∏è</button>
                                            <button class="btn btn-sm btn-outline"
                                                onclick="goToUrlPage('prev')">‚óÄÔ∏è</button>
                                            <span class="page-numbers" id="urlPageNumbers"></span>
                                            <button class="btn btn-sm btn-outline"
                                                onclick="goToUrlPage('next')">‚ñ∂Ô∏è</button>
                                            <button class="btn btn-sm btn-outline"
                                                onclick="goToUrlPage('last')">‚è≠Ô∏è</button>
                                        </div>
                                        <span class="pagination-info" id="urlPaginationInfo">Page 1 of 1</span>
                                    </div>
                                    <div class="pagination-right">
                                        <span>Rows:</span>
                                        <select id="urlRowsPerPage" class="form-control form-control-sm"
                                            onchange="changeUrlRowsPerPage(this.value)">
                                            <option value="25">25</option>
                                            <option value="50">50</option>
                                            <option value="100" selected>100</option>
                                            <option value="200">200</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Projects View -->
                <section class="view" id="projectsView">
                    <div class="projects-container">
                        <div class="projects-header">
                            <h2>üìä Project Management</h2>
                            <button class="btn btn-primary" onclick="openProjectModal()">
                                ‚ûï New Project
                            </button>
                        </div>

                        <div class="projects-layout">
                            <!-- Project List -->
                            <div class="projects-list-panel">
                                <div class="card">
                                    <div class="card-header">
                                        <h3>üìÅ Projects</h3>
                                        <span class="badge" id="projectCount">0</span>
                                    </div>
                                    <div class="card-body">
                                        <div class="projects-list" id="projectsList">
        <div class="project-item active">
            <div class="project-icon">üçÑ</div>
            <div class="project-info"><div class="project-name">Entre</div><div class="project-meta">Survey: 8662546 &nbsp; 628/640</div></div>
            <div class="project-badges"><button class="btn-star-mini active">‚≠ê</button></div>
        </div>
        <div class="project-item"><div class="project-icon">ü¶ñ</div><div class="project-info"><div class="project-name">‚ö° 260106 - h...</div><div class="project-meta">Survey: 8668405</div></div></div>
    </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Project Detail -->
                            <div class="project-detail-panel">
                                <div class="card" id="projectDetailCard" style="display: block;">
                                    <div class="card-header">
                                        <h3 id="projectDetailTitle">Project Detail</h3>
                                        <div class="project-actions">
                                            <button class="btn btn-xs btn-outline" onclick="editCurrentProject()"
                                                title="Edit">‚úèÔ∏è</button>
                                            <button class="btn btn-xs btn-outline btn-danger"
                                                onclick="deleteCurrentProjectMgmt()" title="Delete">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <!-- Project Info -->
                                        <div class="project-info-section">
                                            <div class="info-row">
                                                <span class="info-label">Survey ID:</span>
                                                <span class="info-value" id="projectSurveyId">-</span>
                                            </div>
                                            <div class="info-row">
                                                <span class="info-label">Target:</span>
                                                <span class="info-value" id="projectTarget">-</span>
                                            </div>
                                        </div>

                                        <!-- Criteria Section -->
                                        <div class="project-criteria-section">
                                            <h4>üìã <span data-i18n="project.criteria">Project Criteria</span></h4>
                                            <p class="criteria-text" id="projectCriteria">-</p>
                                        </div>

                                        <!-- Notes Section -->
                                        <div class="project-notes-section" id="projectNotesSection"
                                            style="display: none;">
                                            <h4>üí° <span data-i18n="projectForm.notes">Notes</span></h4>
                                            <p class="notes-text" id="projectNotes">-</p>
                                        </div>

                                        <!-- Quota Section -->
                                        <div class="project-quota-section">
                                            <div class="quota-header">
                                                <h4>üìä Quota Status</h4>
                                                <button class="btn btn-xs btn-primary" onclick="refreshProjectQuotas()"
                                                    id="refreshQuotaBtn">
                                                    üîÑ Refresh
                                                </button>
                                            </div>
                                            <div class="quota-last-fetch" id="quotaLastFetch">Ch∆∞a fetch</div>
                                            <div class="quota-list" id="projectQuotaList">
                                                <div class="empty-state small">
                                                    <p>Click "Refresh" ƒë·ªÉ l·∫•y quota t·ª´ Alchemer</p>
                                                </div>
                                            </div>
                                            <div class="quota-summary" id="quotaSummary" style="display: none;">
                                                <div class="summary-item">
                                                    <span class="summary-label">T·ªïng ho√†n th√†nh:</span>
                                                    <span class="summary-value" id="quotaTotalCompleted">0</span>
                                                </div>
                                                <div class="summary-item">
                                                    <span class="summary-label">C√≤n thi·∫øu:</span>
                                                    <span class="summary-value highlight"
                                                        id="quotaTotalRemaining">0</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Data Info Section -->
                                        <div class="project-data-section">
                                            <div class="data-header">
                                                <h4>üìÇ Project Data</h4>
                                            </div>
                                            <div class="data-info" id="projectDataInfo">
                                                <p class="no-data-text">Ch∆∞a c√≥ data. Click "Import Data" ƒë·ªÉ th√™m.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <button class="btn btn-primary" onclick="importDataForProject()">
                                            üì• Import Data
                                        </button>
                                        <button class="btn btn-secondary" onclick="setAsActiveProject()">
                                            ‚≠ê Set as Active
                                        </button>
                                        <input type="file" id="projectFileInput" accept=".csv,.xlsx,.xls"
                                            style="display: none;" onchange="handleProjectFileImport(event)">
                                    </div>
                                </div>

                                <!-- No Project Selected -->
                                <div class="card" id="noProjectSelected" style="display: none;">
                                    <div class="card-body">
                                        <div class="empty-state">
                                            <span class="empty-icon">üëà</span>
                                            <p>Ch·ªçn m·ªôt project t·ª´ danh s√°ch ƒë·ªÉ xem chi ti·∫øt</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Data View (Filter & Batch) -->
                <section class="view" id="dataView">
                    <div class="data-view-layout">
                        <div class="data-view-main">
                            <!-- Project Info Panel (Moved here) -->
                            
        <div class="data-view-top-layout" style="display: flex; gap: 20px; margin-bottom: 24px;">
            <div id="projectInfoPanelContainer" style="width: 280px; flex-shrink: 0; background: var(--bg-secondary); border-radius:12px; padding:16px; border: 1px solid var(--border-color);">
                <div style="font-weight:700; margin-bottom:12px;">üìÇ 260106 - home</div>
                <div style="background:#fffbeb; padding:10px; border-radius:8px; color:#92400e; font-size:12px; margin-bottom:10px;">üî• Priority: Missing 51</div>
                <div style="height:8px; background:rgba(0,0,0,0.2); border-radius:4px; overflow:hidden;"><div style="width:15%; height:100%; background:#6366f1;"></div></div>
                <div style="font-size:11px; margin-top:4px;">Quota: 9/60</div>
            </div>
            <div class="card" style="flex:1; margin-bottom:0;">
                <div class="card-header" style="padding:10px 16px;">üìã Vendors & Quota</div>
                <div class="card-body" style="height:150px; display:flex; align-items:center; justify-content:center; color:#64748b; font-size:12px; border:1px dashed var(--border-color); margin:10px; border-radius:8px; background:var(--bg-tertiary);">No data for this project.</div>
            </div>
        </div>
    

                            <!-- Main content area -->
                            <div class="data-toolbar">
                                <div class="toolbar-left">
                                    <div class="filter-section">
                                        <button class="btn btn-icon" id="filterToggle" title="Toggle Filters">
                                            üîç
                                        </button>
                                        <span class="filter-status" id="filterStatus" data-i18n="filter.noFilter">No
                                            filter</span>
                                    </div>
                                    <div class="search-box">
                                        <input type="text" id="searchInput" placeholder="Search..."
                                            data-i18n="filter.search" class="form-control">
                                    </div>
                                    <button class="btn btn-sm btn-secondary" onclick="shuffleData()"
                                        title="Shuffle Rows">
                                        <img src="assets/icons/cat.png" alt="" class="btn-icon-img"> üîÄ <span
                                            data-i18n="filter.shuffle">Shuffle</span>
                                    </button>
                                    <div class="column-visibility-dropdown">
                                        <button class="btn btn-sm btn-outline" id="columnVisibilityBtn"
                                            title="Column Visibility">
                                            üëÅÔ∏è <span data-i18n="filter.columns">Columns</span>
                                        </button>
                                        <div class="column-visibility-panel" id="columnVisibilityPanel"
                                            style="display: none;">
                                            <div class="panel-header">
                                                <span data-i18n="filter.showColumns">Show Columns</span>
                                                <button class="btn btn-xs btn-outline"
                                                    onclick="toggleAllColumns(true)">All</button>
                                                <button class="btn btn-xs btn-outline"
                                                    onclick="toggleAllColumns(false)">None</button>
                                            </div>
                                            <div class="column-list" id="columnVisibilityList"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="toolbar-right">
                                    <span class="row-count">Showing <span id="visibleCount">0</span> / <span
                                            id="totalCount">0</span></span>
                                    <button class="btn btn-icon" onclick="refreshData()" title="Refresh">üîÑ</button>
                                </div>
                            </div>
                            <!-- Filter Summary Box -->
                            <div id="filterSummaryBox" style="display:block; background:var(--bg-secondary); padding:16px; border-radius:12px; border:1px solid var(--border-color); margin-bottom:20px;">
        <div style="color:#6366f1; font-weight:700; font-size:13px; margin-bottom:4px;">üü£ Filter Status</div>
        <div style="font-size:13px;">Showing <strong style="color:#6366f1;">2,000 / 4,031</strong> respondents</div>
    </div>

                            <div class="filter-panel" id="filterPanel" style="display: none;">
                                <div class="filter-builder">
                                    <div class="filter-conditions" id="filterConditions">
                                        <!-- Filter conditions will be added here -->
                                    </div>
                                    <div class="filter-actions">
                                        <button class="btn btn-sm btn-secondary" onclick="addFilterCondition()">+ <span
                                                data-i18n="filter.addCondition">Add Condition</span></button>
                                        <button class="btn btn-sm btn-primary" onclick="applyFilters()"
                                            data-i18n="filter.apply">Apply</button>
                                        <button class="btn btn-sm btn-outline" onclick="clearFilters()"
                                            data-i18n="filter.clearAll">Clear All</button>
                                        <button class="btn btn-sm btn-outline" onclick="resetDefaultFilters()"
                                            title="Reset to default filters (province, year, fincome, SMS_Batch)">üîÑ
                                            <span data-i18n="filter.defaults">Defaults</span></button>
                                    </div>
                                </div>
                                <div class="filter-presets">
                                    <label data-i18n="filter.preset">Preset:</label>
                                    <select id="filterPreset" class="form-control form-control-sm">
                                        <option value="">-- Select --</option>
                                        <option value="unmarked" data-i18n="filter.presetUnmarked">Not batched</option>
                                        <option value="sms-pending" data-i18n="filter.presetSmsPending">SMS pending
                                        </option>
                                        <option value="email-pending" data-i18n="filter.presetEmailPending">Email
                                            pending</option>
                                        <option value="sms-sent" data-i18n="filter.presetSmsSent">SMS sent</option>
                                        <option value="email-sent" data-i18n="filter.presetEmailSent">Email sent
                                        </option>
                                    </select>
                                    <button class="btn btn-sm btn-outline" onclick="saveFilterPreset()"
                                        data-i18n="filter.savePreset">Save</button>
                                </div>
                            </div>

                            <!-- Table Header with Project Indicator & Batch Actions -->
                            <div class="table-header-bar">
                                <div class="current-project-indicator">
                                    <span class="project-label">üìÇ <span
                                            data-i18n="filter.project">Project</span>:</span>
                                    <span class="project-name" id="currentProjectName" data-i18n="filter.notSelected">--
                                        Not selected --</span>
                                </div>
                                <div class="batch-dropdown-container">
                                    <div class="batch-dropdown">
                                        <button class="btn btn-sm btn-sms" id="batchDropdownBtn"
                                            onclick="toggleBatchDropdown()">
                                            üì¶ Mark Batch ‚ñº
                                        </button>
                                        <div class="batch-dropdown-menu" id="batchDropdownMenu" style="display: none;">
                                            <div class="dropdown-section">
                                                <span class="dropdown-title">üì± SMS Batch</span>
                                                <button onclick="markBatch('sms', 500); closeBatchDropdown();">Mark
                                                    500</button>
                                                <button onclick="markBatch('sms', 1000); closeBatchDropdown();">Mark
                                                    1000</button>
                                                <button
                                                    onclick="markBatchPrompt('sms'); closeBatchDropdown();">Custom...</button>
                                            </div>
                                            <div class="dropdown-section">
                                                <span class="dropdown-title">üìß Email Batch</span>
                                                <button onclick="markBatch('email', 500); closeBatchDropdown();">Mark
                                                    500</button>
                                                <button onclick="markBatch('email', 1000); closeBatchDropdown();">Mark
                                                    1000</button>
                                                <button
                                                    onclick="markBatchPrompt('email'); closeBatchDropdown();">Custom...</button>
                                            </div>
                                            <div class="dropdown-section">
                                                <span class="dropdown-title">üîî Remind SMS</span>
                                                <button
                                                    onclick="markBatch('remind_sms', 500); closeBatchDropdown();">Mark
                                                    500</button>
                                                <button
                                                    onclick="markBatch('remind_sms', 1000); closeBatchDropdown();">Mark
                                                    1000</button>
                                                <button
                                                    onclick="markBatchPrompt('remind_sms'); closeBatchDropdown();">Custom...</button>
                                            </div>
                                            <div class="dropdown-section">
                                                <span class="dropdown-title">üîî Remind Email</span>
                                                <button
                                                    onclick="markBatch('remind_email', 500); closeBatchDropdown();">Mark
                                                    500</button>
                                                <button
                                                    onclick="markBatch('remind_email', 1000); closeBatchDropdown();">Mark
                                                    1000</button>
                                                <button
                                                    onclick="markBatchPrompt('remind_email'); closeBatchDropdown();">Custom...</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="delete-batch-compact">
                                        <select id="deleteBatchTypeCompact" class="form-control form-control-sm"
                                            onchange="updateDeleteBatchNumbers()">
                                            <option value="sms">SMS</option>
                                            <option value="email">Email</option>
                                        </select>
                                        <select id="deleteBatchNumberCompact" class="form-control form-control-sm">
                                            <option value="">Batch #</option>
                                        </select>
                                        <button class="btn btn-danger btn-sm"
                                            onclick="deleteBatchActionCompact()">üóëÔ∏è</button>
                                    </div>
                                    <button class="btn btn-outline btn-sm" id="undoBtnTop" onclick="undoAction()"
                                        disabled title="Undo">‚Ü∂</button>
                                    <button class="btn btn-outline btn-sm" id="redoBtnTop" onclick="redoAction()"
                                        disabled title="Redo">‚Ü∑</button>
                                </div>
                            </div>

                            <div class="data-table-container">
                                <table class="data-table" id="dataTable">
                                    <thead id="dataTableHead"></thead>
                                    <tbody><tr><td>502</td><td>84909782469</td><td>37</td><td>Female</td><td>HCM</td><td><span class="badge" style="background:#e0f2fe; color:#0369a1;">3</span></td></tr></tbody>
                                </table>
                                <div class="empty-state" id="dataEmptyState">
                                    <img src="assets/icons/mantis.png" alt="" class="empty-icon-img">
                                    <p data-i18n="filter.noData">No data. Please import a file.</p>
                                    <button class="btn btn-primary" onclick="switchView('import')">Import Data</button>
                                </div>
                            </div>

                            <!-- Pagination -->
                            <div class="pagination-controls" id="paginationControls">
                                <div class="pagination-info">
                                    <span data-i18n="filter.rowsPerPage">Rows per page:</span>
                                    <select id="rowsPerPage" class="form-control form-control-sm"
                                        onchange="changeRowsPerPage(this.value)">
                                        <option value="25" selected>25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                        <option value="200">200</option>
                                        <option value="500">500</option>
                                    </select>
                                    <span class="page-info" id="pageInfo">Page 1 of 1</span>
                                </div>
                                <div class="pagination-buttons">
                                    <button class="btn btn-sm btn-outline" onclick="goToPage('first')" id="pageFirst">‚èÆÔ∏è
                                        First</button>
                                    <button class="btn btn-sm btn-outline" onclick="goToPage('prev')" id="pagePrev">‚óÄÔ∏è
                                        Prev</button>
                                    <span class="page-numbers" id="pageNumbers"></span>
                                    <button class="btn btn-sm btn-outline" onclick="goToPage('next')" id="pageNext">Next
                                        ‚ñ∂Ô∏è</button>
                                    <button class="btn btn-sm btn-outline" onclick="goToPage('last')" id="pageLast">Last
                                        ‚è≠Ô∏è</button>
                                </div>
                            </div>

                            <div class="data-actions">
                                <div class="batch-actions">
                                    <div class="action-group">
                                        <label>SMS Batch:</label>
                                        <div class="btn-group">
                                            <button class="btn btn-sms" onclick="markBatch('sms', 500)">Mark
                                                500</button>
                                            <button class="btn btn-sms" onclick="markBatch('sms', 1000)">Mark
                                                1000</button>
                                            <button class="btn btn-sms"
                                                onclick="markBatchPrompt('sms')">Custom...</button>
                                        </div>
                                    </div>
                                    <div class="action-group">
                                        <label>Email Batch:</label>
                                        <div class="btn-group">
                                            <button class="btn btn-email" onclick="markBatch('email', 500)">Mark
                                                500</button>
                                            <button class="btn btn-email" onclick="markBatch('email', 1000)">Mark
                                                1000</button>
                                            <button class="btn btn-email"
                                                onclick="markBatchPrompt('email')">Custom...</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="action-group">
                                    <label>Remind SMS:</label>
                                    <div class="btn-group">
                                        <button class="btn btn-sms" onclick="markBatch('remind_sms', 500)">Mark
                                            500</button>
                                        <button class="btn btn-sms" onclick="markBatch('remind_sms', 1000)">Mark
                                            1000</button>
                                        <button class="btn btn-sms"
                                            onclick="markBatchPrompt('remind_sms')">Custom...</button>
                                    </div>
                                </div>
                                <div class="action-group">
                                    <label>Remind Email:</label>
                                    <div class="btn-group">
                                        <button class="btn btn-email" onclick="markBatch('remind_email', 500)">Mark
                                            500</button>
                                        <button class="btn btn-email" onclick="markBatch('remind_email', 1000)">Mark
                                            1000</button>
                                        <button class="btn btn-email"
                                            onclick="markBatchPrompt('remind_email')">Custom...</button>
                                    </div>
                                </div>
                                <div class="action-group delete-batch-group">
                                    <label>üóëÔ∏è Delete Batch:</label>
                                    <div class="btn-group">
                                        <select id="deleteBatchType" class="form-control form-control-sm">
                                            <option value="sms">SMS</option>
                                            <option value="email">Email</option>
                                        </select>
                                        <select id="deleteBatchNumber" class="form-control form-control-sm">
                                            <option value="">-- Select --</option>
                                        </select>
                                        <button class="btn btn-danger btn-sm"
                                            onclick="deleteBatchAction()">Delete</button>
                                    </div>
                                </div>
                            </div>
                            <div class="undo-actions">
                                <button class="btn btn-outline" id="undoBtn" onclick="undoAction()" disabled>
                                    ‚Ü∂ Undo
                                </button>
                                <button class="btn btn-outline" id="redoBtn" onclick="redoAction()" disabled>
                                    Redo ‚Ü∑
                                </button>
                            </div>
                        </div>

                    </div> <!-- End data-view-main -->
            </div> <!-- End data-view-layout -->
            </section>

            <!-- Export View -->
            <section class="view" id="exportView">
                <div class="export-container">
                    <div class="card">
                        <div class="card-header">
                            <h3>üì§ Export Options</h3>
                        </div>
                        <div class="card-body">
                            <div class="export-type-tabs">
                                <button class="tab-btn active" data-type="sms">SMS Export</button>
                                <button class="tab-btn" data-type="email">Email Export</button>
                                <button class="tab-btn" data-type="custom">Custom Export</button>
                            </div>

                            <div class="export-panel" id="smsExportPanel">
                                <div class="form-group">
                                    <label>Select Batch:</label>
                                    <select id="smsBatchSelect" class="form-control">
                                        <option value="">-- Select batch --</option>
                                    </select>
                                </div>
                                <div class="export-preview-info">
                                    <span>Rows to export: <strong id="smsExportCount">1,240</strong></span>
                                </div>
                                <div class="form-group">
                                    <label>Columns to export:</label>
                                    <div class="column-chips" id="smsExportColumns">
                                        <span class="chip active">Phone (Column A)</span>
                                        <span class="chip active">SMS Content</span>
                                    </div>
                                </div>
                            </div>

                            <div class="export-panel" id="emailExportPanel" style="display: none;">
                                <div class="form-group">
                                    <label>Select Batch:</label>
                                    <select id="emailBatchSelect" class="form-control">
                                        <option value="">-- Select batch --</option>
                                    </select>
                                </div>
                                <div class="export-preview-info">
                                    <span>Rows to export: <strong id="emailExportCount">0</strong></span>
                                </div>
                                <div class="form-group">
                                    <label>Columns to export:</label>
                                    <div class="column-chips" id="emailExportColumns">
                                        <span class="chip active">Email</span>
                                        <span class="chip active">SGUID Link</span>
                                    </div>
                                </div>
                            </div>

                            <div class="export-panel" id="customExportPanel" style="display: none;">
                                <div class="form-group">
                                    <label>Select Columns:</label>
                                    <div class="column-selector" id="customColumnSelector">
                                        <!-- Dynamic columns -->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Filter:</label>
                                    <select id="customExportFilter" class="form-control">
                                        <option value="all">All rows</option>
                                        <option value="visible">Visible rows only (current filter)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="form-group inline">
                                <label>Format:</label>
                                <select id="exportFormat" class="form-control form-control-sm">
                                    <option value="xlsx">Excel (.xlsx)</option>
                                    <option value="csv">CSV (.csv)</option>
                                </select>
                            </div>
                            <button class="btn btn-primary btn-lg" onclick="executeExport()">
                                üì• Download Export
                            </button>
                        </div>
                    </div>

                    <div class="card export-history-card">
                        <div class="card-header">
                            <h3>üìú Export History</h3>
                        </div>
                        <div class="card-body">
                            <ul class="export-history-list" id="exportHistory">
                                <li class="empty-state">
                                    <span class="empty-icon">üìÅ</span>
                                    <p>Ch∆∞a c√≥ export n√†o</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Config View -->
            <section class="view" id="configView">
                <div class="config-container">
                    <div class="card">
                        <div class="card-header">
                            <h3>‚öôÔ∏è Column Configuration</h3>
                        </div>
                        <div class="card-body">
                            <div class="config-grid">
                                <div class="form-group">
                                    <label>Source Column (sguid_link):</label>
                                    <select id="configSourceCol" class="form-control">
                                        <option value="E">E</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Content Column (SMS):</label>
                                    <select id="configContentCol" class="form-control">
                                        <option value="P">P</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>SMS Batch Column:</label>
                                    <select id="configBatchCol" class="form-control">
                                        <option value="Q">Q</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Email Column:</label>
                                    <select id="configEmailCol" class="form-control">
                                        <option value="H">H</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Email Batch Column:</label>
                                    <select id="configEmailBatchCol" class="form-control">
                                        <option value="S">S</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Email Link Column:</label>
                                    <select id="configEmailLinkCol" class="form-control">
                                        <option value="E">E</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Remind SMS Batch Column:</label>
                                    <select id="configRemindSmsBatchCol" class="form-control">
                                        <option value="T">T</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Remind Email Batch Column:</label>
                                    <select id="configRemindEmailBatchCol" class="form-control">
                                        <option value="U">U</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Respondent Status Column:</label>
                                    <select id="configStatusCol" class="form-control">
                                        <option value="V">V</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- API Status Card (Server-managed credentials) -->
                    <div class="card">
                        <div class="card-header">
                            <h3>üîë Alchemer API Status</h3>
                            <span class="api-status" id="alchemerApiStatus">Checking...</span>
                        </div>
                        <div class="card-body">
                            <p class="form-hint" style="margin-bottom: 16px;">
                                <strong>üîí B·∫£o m·∫≠t:</strong> API credentials ƒë∆∞·ª£c qu·∫£n l√Ω server-side qua Firebase
                                Console.<br>
                                Kh√¥ng c·∫ßn nh·∫≠p API keys ·ªü ƒë√¢y. Li√™n h·ªá Admin n·∫øu c·∫ßn c·∫•u h√¨nh.
                            </p>
                            <div class="api-status-details" id="apiStatusDetails">
                                <div class="status-row">
                                    <span class="status-label">Connection:</span>
                                    <span class="status-value" id="apiConnectionStatus">--</span>
                                </div>
                                <div class="status-row">
                                    <span class="status-label">Account:</span>
                                    <span class="status-value" id="apiAccountName">--</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-outline" onclick="checkAlchemerApiStatus()">
                                üîó Ki·ªÉm tra k·∫øt n·ªëi
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üìù Template Management</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Current Template:</label>
                                <textarea id="templateText" class="form-control" rows="4">Moi ban tham gia khao sat tai: {link}</textarea>
                                    placeholder="Enter SMS template text..."></textarea>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                    <small class="form-hint">Bi·∫øn {link} s·∫Ω ƒë∆∞·ª£c thay b·∫±ng gi√° tr·ªã t·ª´ Source
                                        Column</small>
                                    <button class="btn btn-primary btn-sm" onclick="saveSmsToProject()"
                                        title="L∆∞u n·ªôi dung SMS v√†o Project hi·ªán t·∫°i">
                                        üíæ Save SMS to Project
                                    </button>
                                </div>
                            </div>
                            <div class="template-library">
                                <label>Saved Templates:</label>
                                <div class="template-list" id="templateList">
                                    <!-- Dynamic content populated by UIRenderer.renderTemplateLibrary() -->
                                </div>
                                <button class="btn btn-secondary" onclick="saveCurrentTemplate()">+ Save Current as
                                    Template</button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>üîß Advanced Options</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group checkbox-group">
                                <label>
                                    <input type="checkbox" id="configOverwriteBatch">
                                    Overwrite existing batch (ghi ƒë√® batch c≈©)
                                </label>
                            </div>
                            <div class="form-group checkbox-group">
                                <label>
                                    <input type="checkbox" id="configExportAfterMark">
                                    Auto export after mark
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Default batch limit:</label>
                                <input type="number" id="configDefaultLimit" class="form-control" value="500" min="1">
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-secondary" onclick="resetConfig()">Reset to Defaults</button>
                            <button class="btn btn-primary" onclick="saveConfig()">Save Configuration</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Auto Report View -->
            <section class="view" id="autoReportView">
                <div class="auto-report-container">
                    <!-- Report Configuration Card -->
                    <div class="card auto-report-config-card">
                        <div class="card-header">
                            <h3 data-i18n="autoReport.title">üìß C·∫•u h√¨nh Auto Report</h3>
                            <span class="report-status" id="reportConfigStatus" style="color:#22c55e;">üü¢ ƒê√£ c·∫•u h√¨nh</span>
                        </div>
                        <!-- Tab Navigation -->
                        <div class="auto-report-tabs">
                            <button class="auto-report-tab-btn active" data-tab="basic"
                                data-i18n-title="autoReport.basicConfigTooltip"
                                title="Simple setup: 1 email list, 1 report content, sent to all recipients at once.">
                                üìß <span data-i18n="autoReport.basicConfig">Basic Config</span>
                                <span class="tab-status-badge" id="basicScheduleStatus" style="display:none;">üü¢</span>
                            </button>
                            <button class="auto-report-tab-btn" data-tab="multi"
                                data-i18n-title="autoReport.multiScheduleTooltip"
                                title="Advanced setup: Create multiple schedules with different timings, recipients, and report content.">
                                üìÖ <span data-i18n="autoReport.multiSchedule">Multi-Schedule</span>
                                <span class="tab-status-badge" id="multiScheduleStatus" style="display:none;">üü¢</span>
                            </button>
                        </div>
                        <!-- Basic Config Panel (existing) -->
                        <div id="basicConfigPanel" class="card-body">
                            <!-- Project Display (synced from header) -->
                            <div class="form-group"
                                style="display:flex;align-items:center;gap:12px;background:var(--bg-secondary);padding:12px;border-radius:8px;margin-bottom:16px;">
                                <span style="font-weight:600;color:var(--text-secondary);">üìÇ Project:</span>
                                <span id="autoReportProjectDisplay"
                                    style="font-weight:700;color:var(--primary);font-size:1.1em;"
                                    data-i18n="filter.notSelected">-- Not selected --</span>
                                <span style="font-size:11px;color:var(--text-tertiary);"
                                    data-i18n="autoReport.selectFromHeader">(Select project from header)</span>
                                <!-- Hidden select for code compatibility -->
                                <select id="reportProjectSelect" class="form-control" onchange="loadReportConfig()"
                                    style="display:none;">
                                    <option value="" data-i18n="autoReport.selectProjectPlaceholder">-- Ch·ªçn project --
                                    </option>
                                </select>
                            </div>

                            <!-- Config Summary Card (hidden until config is saved) -->
                            <div id="configSummaryCard" class="config-summary-card" style="display:none;">
                                <img src="assets/images/cat-peek.png" class="summary-cat-decoration" alt="Meow">
                                <div class="summary-header">
                                    <span class="summary-title">üìã <span
                                            data-i18n="autoReport.configSummary">Configuration Summary</span></span>
                                    <span class="summary-status" id="summaryStatus">‚úÖ <span
                                            data-i18n="autoReport.saved">Saved</span></span>
                                </div>
                                <div class="summary-content">
                                    <div class="summary-item">
                                        <span class="summary-icon">üìÖ</span>
                                        <span class="summary-label">Fieldwork:</span>
                                        <span class="summary-value" id="summaryFieldwork">--</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-icon">‚è∞</span>
                                        <span class="summary-label" data-i18n="autoReport.timeSlots">Time Slots:</span>
                                        <span class="summary-value" id="summarySchedule">--</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-icon">üìß</span>
                                        <span class="summary-label" data-i18n="autoReport.email">Email:</span>
                                        <span class="summary-value" id="summaryEmails">--</span>
                                    </div>
                                    <div class="summary-item" title="" id="summarySectionsWrapper">
                                        <span class="summary-icon">üìä</span>
                                        <span class="summary-label">Sections:</span>
                                        <span class="summary-value summary-tooltip" id="summarySections">--</span>
                                    </div>
                                </div>
                            </div>

                            <div class="config-grid">
                                <!-- Survey ID (auto-filled from project, read-only display) -->
                                <div class="form-group">
                                    <label data-i18n="autoReport.surveyId">Survey ID:</label>
                                    <input type="text" id="reportSurveyId" class="form-control" readonly
                                        style="background:var(--bg-secondary);cursor:default;"
                                        placeholder="T·ª± ƒë·ªông t·ª´ Project" title="Survey ID ƒë∆∞·ª£c l·∫•y t·ª´ Project metadata">
                                </div>

                                <!-- Fieldwork Dates -->
                                <div class="form-group">
                                    <label data-i18n="autoReport.startDate">Ng√†y b·∫Øt ƒë·∫ßu Fieldwork:</label>
                                    <input type="date" id="reportStartDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label data-i18n="autoReport.endDate">Ng√†y k·∫øt th√∫c Fieldwork:</label>
                                    <input type="date" id="reportEndDate" class="form-control">
                                </div>

                                <!-- Email Recipients -->
                                <div class="form-group full-width">
                                    <label data-i18n="autoReport.emails">Email nh·∫≠n b√°o c√°o (ph√¢n c√°ch b·∫±ng d·∫•u
                                        ph·∫©y):</label>
                                    <input type="text" id="reportEmails" class="form-control"
                                        placeholder="email1@example.com, email2@example.com"
                                        data-i18n="autoReport.emailsPlaceholder">
                                </div>

                                <!-- Schedule Settings -->
                                <div class="form-group full-width">
                                    <label data-i18n="autoReport.schedule">G·ª≠i b√°o c√°o t·ª± ƒë·ªông (ch·ªçn nhi·ªÅu khung
                                        gi·ªù):</label>
                                    <div class="schedule-checkboxes" id="scheduleCheckboxes">
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_7"> <span>üåÖ
                                                7:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_8"> <span>‚òÄÔ∏è
                                                8:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_9"> <span>üå§Ô∏è
                                                9:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_12"> <span>üåû
                                                12:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_13"> <span>üåû
                                                13:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_14"> <span>‚õÖ
                                                14:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_15"> <span>‚õÖ
                                                15:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_16"> <span>üåÜ
                                                16:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_17"> <span>üåÜ
                                                17:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_18"> <span>üåá
                                                18:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_19"> <span>üåô
                                                19:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_20"> <span>üåô
                                                20:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_21"> <span>üåô
                                                21:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_22"> <span>üåë
                                                22:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_23"> <span>üåë
                                                23:00</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="reportSchedule" value="daily_0"> <span>üåë
                                                0:00</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Recipient Groups -->
                                <div class="form-group full-width">
                                    <label>üë• Nh√≥m ng∆∞·ªùi nh·∫≠n: <small style="color:var(--text-tertiary)">(Click ƒë·ªÉ ch·ªçn
                                            nhi·ªÅu nh√≥m)</small></label>
                                    <div class="recipient-groups-panel" id="recipientGroupsPanel">
                                        <!-- Multi-select group chips -->
                                        <div class="recipient-groups-list" id="recipientGroupsList">
                                            <!-- Groups will be rendered here as clickable chips -->
                                        </div>

                                        <!-- Usage guide -->
                                        <div class="recipient-groups-help"
                                            style="background:rgba(99,102,241,0.1);border:1px solid var(--color-primary);border-radius:8px;padding:10px 12px;margin:10px 0;font-size:12px;">
                                            üí° <strong data-i18n="autoReport.groupGuide">Guide</strong>: <span
                                                data-i18n="autoReport.groupGuideText">Click on each group to
                                                select/deselect. Selected groups will be highlighted in purple. When
                                                scheduled, reports will be sent to ALL selected groups based on the
                                                configured time.</span>
                                        </div>

                                        <div class="recipient-group-actions">
                                            <button class="btn btn-sm btn-primary" onclick="sendToSelectedGroups()"
                                                data-i18n-title="autoReport.sendToSelectedTitle">
                                                üì§ <span data-i18n="autoReport.sendToSelected">Send to Selected
                                                    Groups</span>
                                            </button>
                                            <button class="btn btn-sm btn-outline" onclick="openGroupConfigModal()">‚öôÔ∏è
                                                <span data-i18n="autoReport.configureGroup">Configure
                                                    Group</span></button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Section Visibility -->
                                <div class="form-group full-width">
                                    <label>üëÅÔ∏è <span data-i18n="autoReport.sectionsInReport">Sections to Display in
                                            Report</span>:</label>
                                    <div class="section-visibility-panel" id="sectionVisibilityPanel">
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sectionVisibility" value="statusCards" checked>
                                            üìä Status Cards (Target, Complete, Today)
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sectionVisibility" value="pacingAndRecs"
                                                checked>
                                            üìà Pacing & Recommendations
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sectionVisibility" value="timeline" checked>
                                            üìÖ Daily Timeline
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sectionVisibility" value="statistics" checked>
                                            üìâ Statistics Summary
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="sectionVisibility" value="quotaTable" checked>
                                            üìã Quota Detail Table
                                        </label>
                                    </div>
                                </div>

                                <!-- Timeline Days Setting -->
                                <div class="form-group">
                                    <label>üìÖ <span data-i18n="autoReport.timelineDaysLabel">Timeline Days to
                                            Display</span>:</label>
                                    <input type="number" id="reportTimelineDays" class="form-control" min="7" max="60"
                                        value="7" placeholder="7">
                                    <small style="color:var(--text-tertiary);font-size:11px;"
                                        data-i18n="autoReport.timelineDaysRange">From 7 to 60 days</small>
                                </div>

                                <!-- Unified Quota Section -->
                                <div class="form-group full-width">
                                    <label>üìä <span data-i18n="autoReport.quotaInReport">Quotas to Display in
                                            Report</span>:</label>
                                    <div style="background:var(--bg-secondary);border-radius:8px;padding:12px;">
                                        <!-- Actions -->
                                        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;">
                                            <button class="btn btn-sm btn-primary" onclick="loadQuotasFromApi()"
                                                data-i18n-title="autoReport.loadFromApiTitle">üîÑ <span
                                                    data-i18n="autoReport.loadFromApi">Load from API</span></button>
                                            <button class="btn btn-sm btn-outline" onclick="addManualQuota()"
                                                data-i18n-title="autoReport.addManualTitle">+ <span
                                                    data-i18n="autoReport.addManual">Add</span></button>
                                            <button class="btn btn-sm btn-outline"
                                                onclick="selectAllUnifiedQuotas(true)"
                                                data-i18n-title="autoReport.selectAllTitle">‚òëÔ∏è <span
                                                    data-i18n="autoReport.selectAll">All</span></button>
                                            <button class="btn btn-sm btn-outline"
                                                onclick="selectAllUnifiedQuotas(false)"
                                                data-i18n-title="autoReport.deselectAllTitle">‚òê <span
                                                    data-i18n="autoReport.deselectAll">Deselect</span></button>
                                        </div>

                                        <!-- Keyword Filter with Apply Button -->
                                        <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px;">
                                            <input type="text" id="quotaKeywordFilter"
                                                class="form-control form-control-sm"
                                                data-i18n-placeholder="autoReport.keywordPlaceholder"
                                                placeholder="üîç Enter keyword (e.g., online, total)" style="flex:1;">
                                            <button class="btn btn-sm btn-primary" onclick="applyKeywordFilter()"
                                                data-i18n-title="autoReport.applyFilterTitle">
                                                ‚úì <span data-i18n="autoReport.applyFilter">Apply</span>
                                            </button>
                                        </div>

                                        <!-- Quota List Header -->
                                        <div
                                            style="display:flex;gap:4px;padding:8px;background:#e2e8f0;border-radius:4px 4px 0 0;font-size:11px;font-weight:600;color:#475569;">
                                            <span style="width:24px;"></span>
                                            <span style="flex:2;" data-i18n="autoReport.quotaName">Quota Name</span>
                                            <span style="width:70px;text-align:center;"
                                                data-i18n="autoReport.quotaTarget">Target</span>
                                            <span style="width:70px;text-align:center;"
                                                data-i18n="autoReport.quotaAchieved">Achieved</span>
                                            <span style="width:28px;"></span>
                                        </div>

                                        <!-- Quota List -->
                                        <div id="unifiedQuotaList"
                                            style="max-height:300px;overflow-y:auto;background:#fff;border:1px solid #e2e8f0;border-top:none;border-radius:0 0 4px 4px;">
                                            <p style="color:var(--text-tertiary);font-size:12px;padding:16px;text-align:center;"
                                                data-i18n="autoReport.loadQuotasHint">
                                                Click "üîÑ Load from API" to display quota list
                                            </p>
                                        </div>

                                        <small
                                            style="display:block;margin-top:8px;color:var(--text-tertiary);font-size:11px;"
                                            data-i18n="autoReport.quotaNote">
                                            ‚úÖ Only selected quotas will be displayed in the report. You can edit names
                                            and values.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer" id="basicConfigFooter">
                            <button class="btn btn-secondary" onclick="testReportApiConnection()"
                                data-i18n="autoReport.testApi">
                                üîç Test API Connection
                            </button>
                            <button class="btn btn-primary" onclick="saveReportConfig()"
                                data-i18n="autoReport.saveConfig">
                                üíæ Save Config
                            </button>
                        </div>
                        <div id="multiSchedulePanel" class="card-body" style="display:none;">
                            <div class="multi-schedule-header">
                                <h4>üìÖ <span data-i18n="autoReport.scheduleList">Report Schedule List</span></h4>
                                <div class="multi-schedule-actions">
                                    <button class="btn btn-primary"
                                        onclick="MultiScheduleManager.addScheduleInstance()">
                                        + <span data-i18n="autoReport.addSchedule">Add Schedule</span>
                                    </button>
                                    <button class="btn btn-outline"
                                        onclick="MultiScheduleManager.saveScheduleInstances()">
                                        üíæ <span data-i18n="autoReport.saveAll">Save All</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Project Display (synced from header) -->
                            <div class="form-group"
                                style="display:flex;align-items:center;gap:12px;background:var(--bg-secondary);padding:12px;border-radius:8px;margin-bottom:16px;">
                                <span style="font-weight:600;color:var(--text-secondary);">üìÇ Project:</span>
                                <span id="multiScheduleProjectDisplay"
                                    style="font-weight:700;color:var(--primary);font-size:1.1em;">-- Ch∆∞a ch·ªçn --</span>
                                <span style="font-size:11px;color:var(--text-tertiary);"
                                    data-i18n="autoReport.selectFromHeaderHint">(Select project from header)</span>
                            </div>

                            <!-- Fieldwork Dates for Multi-Schedule -->
                            <div class="form-row" style="margin-bottom:16px;">
                                <div class="form-group" style="flex:1;">
                                    <label>üìÖ <span data-i18n="autoReport.fieldworkStart">Fieldwork Start
                                            Date</span>:</label>
                                    <input type="date" id="multiScheduleStartDate" class="form-control">
                                </div>
                                <div class="form-group" style="flex:1;">
                                    <label>üìÖ <span data-i18n="autoReport.fieldworkEnd">Fieldwork End
                                            Date</span>:</label>
                                    <input type="date" id="multiScheduleEndDate" class="form-control">
                                </div>
                            </div>

                            <div class="multi-schedule-info">
                                <small>üí° <span data-i18n="autoReport.scheduleInfoHint">Each schedule can have its own
                                        time slots, recipients, and content.</span></small>
                            </div>
                            <div id="multiScheduleList" class="multi-schedule-list">
                                <div class="multi-schedule-empty">
                                    <span class="empty-icon">üìÖ</span>
                                    <p data-i18n="autoReport.noScheduleYet">No schedules yet</p>
                                    <button class="btn btn-primary"
                                        onclick="MultiScheduleManager.addScheduleInstance()">
                                        + <span data-i18n="autoReport.addFirstSchedule">Add first schedule</span>
                                    </button>
                                </div>
                            </div>

                            <div class="multi-schedule-info" style="margin-top:16px;">
                                <small>üí° <span data-i18n="autoReport.timelineQuotaHint">Each schedule has its own
                                        Timeline Days and Quotas. Click ‚öô to configure details.</span></small>
                            </div>
                        </div>
                    </div>

                    <!-- Report Preview Card -->
                    <div class="card auto-report-preview-card">
                        <div class="card-header">
                            <h3 data-i18n="autoReport.previewTitle">üëÅÔ∏è Preview B√°o c√°o</h3>
                            <div class="preview-actions">
                                <button class="btn btn-sm btn-outline" onclick="refreshReportPreview()"
                                    id="refreshPreviewBtn" disabled data-i18n="autoReport.refresh">
                                    üîÑ Refresh
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="report-preview-container" id="reportPreviewContainer">
                                <div class="empty-state">
                                    <span class="empty-icon">üìä</span>
                                    <p data-i18n="autoReport.previewPlaceholder">Ch·ªçn project v√† nh·∫•n "Refresh" ƒë·ªÉ xem
                                        preview b√°o c√°o</p>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer" style="display:flex;gap:8px;flex-wrap:wrap;">
                            <button class="btn btn-primary" onclick="sendReportNow()" id="sendReportBtn" disabled
                                data-i18n="autoReport.sendNow">
                                üìß G·ª≠i b√°o c√°o ngay
                            </button>
                            <button class="btn btn-outline" onclick="testSchedule()" id="testScheduleBtn" disabled
                                title="Test g·ª≠i b√°o c√°o C·∫•u h√¨nh c∆° b·∫£n theo format server (fetch fresh data t·ª´ API)"
                                style="border-color:#f59e0b;color:#f59e0b;">
                                üß™ Test C·∫•u h√¨nh c∆° b·∫£n
                            </button>
                        </div>
                    </div>

                    <!-- Report History Card -->
                    <div class="card auto-report-history-card">
                        <div class="card-header">
                            <h3>üìú <span data-i18n="autoReport.history">L·ªãch s·ª≠ g·ª≠i b√°o c√°o</span></h3>
                        </div>
                        <div class="card-body">
                            <div class="report-history-list" id="reportHistoryList">
                                <div class="empty-state small">
                                    <p data-i18n="history.empty">Ch∆∞a c√≥ b√°o c√°o n√†o ƒë∆∞·ª£c g·ª≠i</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
    </div>
    </main>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal Container -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Modal Title</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Modal content -->
            </div>
            <div class="modal-footer" id="modalFooter">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" id="modalConfirm">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    <!-- ‚ïê‚ïê‚ïê COPYRIGHT PROTECTION MODULE ‚ïê‚ïê‚ïê -->
    

    

    <!-- ‚ïê‚ïê‚ïê FOOTER COPYRIGHT WATERMARK ‚ïê‚ïê‚ïê -->
    <!-- ¬© 2025 Ph·∫°m ƒê√¥ng ƒêi·ªÅn | phamdongdien19@gmail.com | PDD-FWTOOLS-2024-AUTHENTIC -->

<script>
    function toggleSidebar() { document.getElementById('sidebar')?.classList.toggle('collapsed'); }
    function toggleMobileMenu() { 
        document.getElementById('sidebar')?.classList.toggle('mobile-open'); 
        document.getElementById('mobileOverlay')?.classList.toggle('active'); 
    }
    function switchView(viewId, el) {
        console.log('Switching to view:', viewId);
        
        // 1. Update Classes
        document.querySelectorAll('.view').forEach(v => {
            v.classList.remove('active');
            v.style.setProperty('display', 'none', 'important');
        });
        
        const target = document.getElementById(viewId + 'View');
        if (target) {
            target.classList.add('active');
            target.style.setProperty('display', 'block', 'important');
            console.log('Target view activated:', viewId + 'View');
        } else {
            console.error('Target view NOT found:', viewId + 'View');
        }
        
        // 2. Update Nav UI
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        if (el) {
            el.classList.add('active');
        } else {
            const nav = document.querySelector(`[data-view="${viewId}"]`);
            if(nav) nav.classList.add('active');
        }
        
        // 3. Update Title
        const titles = { 
            dashboard: 'Dashboard', 
            projects: 'Projects', 
            data: 'Filter & Batch', 
            export: 'Export', 
            config: 'Config', 
            autoReport: 'Auto Report',
            import: 'Import'
        };
        const titleEl = document.getElementById('pageTitle');
        if (titleEl) titleEl.innerText = titles[viewId] || 'FW Tools';
        
        // 4. Scroll to top
        const main = document.querySelector('.main-content');
        if(main) main.scrollTop = 0;
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.documentElement.setAttribute('data-theme', 'dark');
        
        // Setup Nav Links
        document.querySelectorAll('.nav-item').forEach(item => {
            item.onclick = (e) => {
                e.preventDefault();
                const view = item.getAttribute('data-view');
                if(view) switchView(view, item);
            };
        });
        
        document.getElementById('sidebarToggle')?.addEventListener('click', toggleSidebar);
        document.getElementById('mobileMenuBtn')?.addEventListener('click', toggleMobileMenu);
        document.getElementById('mobileOverlay')?.addEventListener('click', toggleMobileMenu);
        
        // Initial View
        switchView('dashboard'); 
    });
</script>
    
</body>

</html>